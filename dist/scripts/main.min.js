app.map=app.map||{},function(){app.map={init:function(){var e={lat:39.927677,lng:-75.171909},a=document.getElementById("map-container");this.map=new google.maps.Map(a,{center:e,zoom:14,minZoom:12,maxZoom:18,mapTypeControl:!1}),this.placesApi=new google.maps.places.PlacesService(app.map.map),this.infoWindow=new google.maps.InfoWindow({maxWidth:.7*$(window).width()}),google.maps.event.addListener(this.infoWindow,"closeclick",function(){$("#drawer-btn").removeClass("open"),$("#drawer-btn").addClass("closed")}),setTimeout(function(){$("#maps-error").css("display","inline")},5e3),google.maps.event.addListenerOnce(this.map,"bounds_changed",this.getPlaces)},getPlaces:function(){var e={bounds:app.map.map.getBounds(),types:["art_gallery","museum","park"]};app.map.placesApi.nearbySearch(e,function(e,a){if("OK"===a)e.forEach(function(e,a){var o=new app.viewmodel.Place(e);app.viewmodel.places.push(o),1===a&&(console.log("set current place"),app.viewmodel.curPlace(o))});else{console.log("We have a places error");var o="Google Places Error: "+a;app.viewmodel.addError(o)}ko.applyBindings(app.viewmodel)})},getPlaceDetails:function(e){var a={placeId:e.data.place_id};app.map.placesApi.getDetails(a,function(a,o){if(console.log("status",o),"OK"===o){var n=new app.viewmodel.PlaceDetails(a);e.details(n)}else{var p="Google Places Error while getting details: "+o;app.viewmodel.addError(p)}})},createMarker:function(e){var a=e.data.geometry.location,o=new google.maps.Marker({animation:google.maps.Animation.DROP,attribution:{source:"mrkjesus2.github.io/Neighborhood-Map"},icon:e.data.icon,map:app.map.map,place:{location:{lat:a.lat(),lng:a.lng()},placeId:e.data.place_id},title:e.data.name});return google.maps.event.addListener(o,"click",function(){app.viewmodel.clickHandler(e)}),o}}}();
//# sourceMappingURL=main.min.js.map
