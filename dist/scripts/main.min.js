app.viewmodel=app.viewmodel||{},app.viewmodel={mapError:ko.observable(),places:ko.observableArray(),curMarker:null,curPlace:ko.observable(),inputText:ko.observable(""),frsqr:null,errorMsg:ko.observableArray([]),infoWindow:ko.observable(!1),drawerOpen:ko.observable(!1),showModal:ko.observable(!1),Place:function(e){this.show=ko.observable(!0),this.name=ko.observable(e.name),this.rating=ko.observable(e.rating),this.open=ko.observable(e.opening_hours?"Open Now":"Closed"),e.photos?this.photo=ko.observable({url:ko.observable(e.photos[0].url),height:ko.observable(e.photos[0].height),width:ko.observable(e.photos[0].width),attributions:ko.observable(e.photos[0].html_attributions)}||{}):this.photo=ko.observable("none"),this.data=e,this.detailsIcon=ko.observable("fa fa-chevron-circle-up"),this.details=ko.observable(),this.marker=app.map.createMarker(this),this.wikiInfo=ko.observable(),this.frSqrInfo=ko.observable()},WikiPage:function(e){this.content=ko.observable(e.extract),this.url=ko.observable(e.fullurl)},fourSquare:function(e,o,a){var r=ko.mapping.fromJS(e,{}),t=ko.mapping.fromJS(o,{});r.tips=t,a.frSqrInfo(r)},PlaceDetails:function(e){this.show=ko.observable(!0),this.address=ko.observable(e.formatted_address),this.phone=ko.observable(e.formatted_phone_number),this.photos=ko.observableArray(e.photos),this.rating=ko.observable(e.rating),this.website=ko.observable(e.website),this.reviews=ko.observableArray(new app.viewmodel.Reviews(e.reviews))},Reviews:function(e){var o=[];return e.forEach(function(e){o.push({author:ko.observable(e.author_name),authorUrl:ko.observable(e.author_url),text:ko.observable(e.text),time:ko.observable(e.time)})}),o},addError:function(e){this.errorMsg=this.errorMsg||ko.observableArray([]),this.errorMsg.push(e),setTimeout(function(){app.viewmodel.clearErrors()},2e3)},clearErrors:function(){this.errorMsg([])},setCurrentPlace:function(e){app.viewmodel.curPlace().marker.getAnimation()&&app.viewmodel.toggleBounce(),app.viewmodel.curPlace(e)},toggleDetails:function(e){void 0!==e.details()&&e.details().show()===!0?(e.details().show(!1),e.detailsIcon("fa fa-chevron-circle-up")):(app.map.getPlaceDetails(e),app.viewmodel.setCurrentPlace(e),e.detailsIcon("fa fa-chevron-circle-down"))},clickContactInfo:function(){this.inputText(this.curPlace().name()),$("#drawer-top input").trigger("input"),this.toggleDetails(app.viewmodel.curPlace()),app.map.infoWindow.close(),this.toggleDrawer()},clickHandler:function(e){var o=e||this;app.wiki.getWiki(o),app.foursquare.findPlace(o),app.map.infoWindow.close(),app.viewmodel.drawerOpen()&&app.viewmodel.toggleDrawer(),app.viewmodel.setCurrentPlace(o),app.viewmodel.toggleBounce(),setTimeout(function(){app.viewmodel.setInfoWindow(o)},300)},placeFilter:function(){var e=this;return setTimeout(function(){if(e.inputText()){var o=e.places().filter(function(o){var a=o.name().toLowerCase(),r=e.inputText().toLowerCase();return 0===a.indexOf(r)});e.places().forEach(function(e){e.marker.setMap(null),e.show(!1)}),o.forEach(function(e){e.marker.setMap(app.map.map),e.show(!0)})}else e.places().forEach(function(e){e.marker.setMap(app.map.map),e.show(!0)})},100),!0},resetFilter:function(){app.viewmodel.inputText(""),$("#drawer-top input").trigger("input")},setInfoWindow:function(e){var o=$("#infowindow").html();app.map.infoWindow.setContent(o),app.map.infoWindow.open(app.map.map,e.marker),app.viewmodel.infoWindow(!0)},toggleBounce:function(){if(app.viewmodel.curPlace().marker.getAnimation())app.viewmodel.curPlace().marker.setAnimation(null);else{var e=app.viewmodel.curPlace().marker;e.setAnimation(google.maps.Animation.BOUNCE)}},toggleDrawer:function(){app.viewmodel.drawerOpen(!app.viewmodel.drawerOpen())},setModal:function(){app.viewmodel.showModal(!app.viewmodel.showModal())}};
//# sourceMappingURL=main.min.js.map
