<<<<<<< HEAD
{"version":3,"sources":["map.js","foursquare.js","wiki.js","viewModel.js"],"names":["app","map","init","home","lat","lng","el","document","getElementById","this","google","maps","Map","center","zoom","minZoom","maxZoom","mapTypeControl","placesApi","places","PlacesService","infoWindow","InfoWindow","maxWidth","$","window","width","event","addListener","viewmodel","setTimeout","mapError","addListenerOnce","getPlaces","createPlaces","forEach","place","idx","plc","Place","push","placeList","name","curPlace","autocomplete","storePlaces","localStorage","setItem","JSON","stringify","retrievePlaces","parse","geometry","location","sameBoundsCheck","console","log","ko","applyBindings","getBounds","request","bounds","types","nearbySearch","results","status","setPhotoUrls","msg","addError","oldBounds","equals","photos","url","getUrl","maxHeight","getPlaceDetails","placeId","data","place_id","getDetails","details","deets","PlaceDetails","createMarker","plcloc","image","icon","scaledSize","Size","marker","Marker","animation","Animation","DROP","attribution","source","title","clickHandler","foursquare","CLIENTID","CLIENTSECRET","baseUrl","version","findPlace","loc","jQuery","ajax","query","ll","client_id","client_secret","v","limit","dataType","done","venue","response","venues","getTips","fail","statusText","id","tips","fourSquare","setInfoWindow","wiki","getWiki","action","prop","exintro","exchars","inprop","format","redirects","converttitles","titles","headers","Api-User-Agent","firstId","Object","keys","pages","page","WikiPage","undefined","content","ambiguityChk","wikiInfo","categories","category","observable","observableArray","curMarker","inputText","frsqr","errorMsg","drawerOpen","showModal","show","rating","open","opening_hours","photo","height","attributions","html_attributions","detailsIcon","frSqrInfo","extract","fullurl","info","mapping","fromJS","frSqrTips","address","formatted_address","phone","formatted_phone_number","website","reviews","Reviews","arr","review","author","author_name","authorUrl","author_url","text","time","clearErrors","setCurrentPlace","getAnimation","toggleBounce","toggleDetails","clickContactInfo","placeFilter","close","toggleDrawer","findPlaceByName","i","length","self","matches","filter","toLowerCase","input","indexOf","setMap","resetFilter","html","setContent","setAnimation","BOUNCE","setModal","awesomplete","Awesomplete","list","addEventListener","value"],"mappings":"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","file":"main.min.js","sourcesContent":["/* global app document google $ window ko localStorage */\napp.map = app.map || {};\n\n(function() {\n  app.map = {\n    // Callback function for Google Maps - Initialize the Map\n    init: function() {\n      var home = {lat: 39.927677, lng: -75.171909};\n      var el = document.getElementById('map-container');\n\n      this.map = new google.maps.Map(el, {\n        center: home,\n        zoom: 14,\n        minZoom: 12,\n        maxZoom: 18,\n        mapTypeControl: false\n      });\n      this.placesApi = new google.maps.places.PlacesService(app.map.map);\n      this.infoWindow = new google.maps.InfoWindow({\n        maxWidth: $(window).width() * 0.7}\n      );\n\n      // Show the drawer button when infowindow closes\n      google.maps.event.addListener(this.infoWindow, 'closeclick', function() {\n        app.viewmodel.infoWindow(false);\n      });\n\n      // Show error message - if maps can't be reached, will be visible\n      setTimeout(function() {\n        app.viewmodel.mapError('There appears to be a problem with Google Maps, please try refreshing the page');\n      }, 5000);\n      // Load places once the maps bounds are set\n      google.maps.event.addListenerOnce(\n        this.map, 'bounds_changed', this.getPlaces\n      );\n    },\n\n    createPlaces: function(places) {\n      places.forEach(function(place, idx) {\n        var plc = new app.viewmodel.Place(place);\n\n        app.viewmodel.places.push(plc);\n        app.viewmodel.placeList.push(plc.name());\n        if (idx === 1) {\n          app.viewmodel.curPlace(plc);\n        }\n      });\n      app.viewmodel.autocomplete();\n    },\n\n    // Likely against TOS, but figure it's fine for educational purposes\n    storePlaces: function(places) {\n      localStorage.setItem('places', JSON.stringify(places));\n    },\n\n    retrievePlaces: function() {\n      var places = JSON.parse(localStorage.places);\n      places.forEach(function(place) {\n        var lat = place.geometry.location.lat;\n        var lng = place.geometry.location.lng;\n        // Make lat/lng into functions to match API results\n        place.geometry.location.lat = function() {\n          return lat;\n        };\n        place.geometry.location.lng = function() {\n          return lng;\n        };\n      });\n      return places;\n    },\n\n    // Get a list of places from Google Maps\n    getPlaces: function() {\n      if (localStorage.places && app.map.sameBoundsCheck()) {\n        console.log('Creating places from storage');\n        app.map.createPlaces(app.map.retrievePlaces());\n        ko.applyBindings(app.viewmodel);\n      } else {\n        localStorage.setItem('bounds', JSON.stringify(app.map.map.getBounds()));\n        // Variables for the request\n        var request = {\n          bounds: app.map.map.getBounds(),\n          types: ['art_gallery', 'museum', 'park']\n        };\n\n        // Call the Places API\n        app.map.placesApi.nearbySearch(request, function(results, status) {\n          console.log('Calling Places API');\n          if (status === 'OK') {\n            app.map.setPhotoUrls(results);\n            app.map.storePlaces(results);\n            app.map.createPlaces(results);\n          } else {\n            console.log('We have a places error');\n            var msg = 'Google Places Error: ' + status;\n            app.viewmodel.addError(msg);\n          }\n          ko.applyBindings(app.viewmodel);\n        });\n      }\n    },\n\n    sameBoundsCheck: function() {\n      var oldBounds = JSON.parse(localStorage.bounds);\n      return app.map.map.getBounds().equals(oldBounds);\n    },\n\n    setPhotoUrls: function(places) {\n      places.forEach(function(place) {\n        if (place.photos) {\n          var url = place.photos[0].getUrl({maxWidth: 200,\n                                            maxHeight: 300});\n          place.photos[0].url = url;\n        }\n      });\n    },\n\n    getPlaceDetails: function(place) {\n      var request = {\n        placeId: place.data.place_id\n      };\n      // Call the Places API, add details to the place\n      app.map.placesApi.getDetails(request, function(details, status) {\n        if (status === 'OK') {\n          var deets = new app.viewmodel.PlaceDetails(details);\n          place.details(deets);\n        } else {\n          var msg = 'Google Places Error while getting details: ' + status;\n          app.viewmodel.addError(msg);\n        }\n      });\n    },\n\n    createMarker: function(place) {\n      // Location for the Marker\n      var plcloc = place.data.geometry.location;\n      // Set icon and icon size\n      var image = {\n        url: place.data.icon,\n        scaledSize: new google.maps.Size(50, 50)\n      };\n      // Create the marker\n      var marker = new google.maps.Marker({\n        animation: google.maps.Animation.DROP,\n        attribution: {source: 'mrkjesus2.github.io/Neighborhood-Map'},\n        icon: image,\n        map: app.map.map,\n        place: {\n          location: {lat: plcloc.lat(), lng: plcloc.lng()},\n          placeId: place.data.place_id\n        },\n        title: place.data.name\n      });\n\n      google.maps.event.addListener(marker, 'click', function() {\n        app.viewmodel.clickHandler(place);\n      });\n      return marker;\n    }\n  };\n})();\n","/* global app jQuery */\napp.foursquare = app.foursquare || {};\n\n(function() {\n  // TODO: Move this to a config file (keep out of git)\n  var CLIENTID = 'ZBGAM3NOJCK4P345ELK2JIB232FMDENJ05GXYQRSAHOHURJR';\n  var CLIENTSECRET = 'RGEF2DNONIR0AN2GHSIIMGZWLT0IH5JSJCJ5AGFAJ2WZDGLH';\n\n  app.foursquare = {\n    baseUrl: 'https://api.foursquare.com/v2/venues/',\n    version: '20140806',\n\n    findPlace: function(place) {\n      var loc = place.data.geometry.location;\n      // Call the foursquare API\n      jQuery.ajax({\n        url: this.baseUrl + 'search',\n        data: {\n          query: place.name(),\n          ll: loc.lat() + ',' + loc.lng(),\n          // Disabled lines due to API requirements\n          client_id: CLIENTID, // eslint-disable-line camelcase\n          client_secret: CLIENTSECRET, // eslint-disable-line camelcase\n          v: this.version,\n          limit: '1'\n        },\n        dataType: 'json'\n\n      }).done(function(data) {\n        // Best matching venue\n        var venue = data.response.venues[0];\n\n        // Call the API again for venue tips\n        app.foursquare.getTips(venue, place);\n      }).fail(function(data) {\n        var msg = 'Foursquare Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    },\n\n    getTips: function(venue, place) {\n      jQuery.ajax({\n        url: this.baseUrl + venue.id + '/tips',\n        data: {\n          // Disabled lines due to API requirements\n          client_id: CLIENTID, // eslint-disable-line camelcase\n          client_secret: CLIENTSECRET, // eslint-disable-line camelcase\n          v: this.version\n        },\n        dataType: 'json'\n      }).done(function(data) {\n        var tips = data.response.tips;\n        // Assign details to place\n        app.viewmodel.fourSquare(venue, tips, place);\n        app.viewmodel.setInfoWindow(place);\n      }).fail(function(data) {\n        var msg = 'Foursquare Tips Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    }\n  };\n})();\n","/* global app jQuery */\napp.wiki = app.wiki || {};\n\n(function() {\n  app.wiki = {\n    getWiki: function(place) {\n      jQuery.ajax({\n        url: 'https://en.wikipedia.org/w/api.php',\n        data: {\n          action: 'query',\n          prop: 'categories|extracts|info',\n          exintro: '',\n          exchars: 1000,\n          inprop: 'url',\n          format: 'json',\n          redirects: '',\n          converttitles: '',\n          titles: place.name()\n        },\n        dataType: 'jsonp',\n        headers: {'Api-User-Agent': 'Mark\\'s Udacity Project'}\n\n      }).done(function(data) {\n        var firstId = Object.keys(data.query.pages)['0'];\n        var page = new app.viewmodel.WikiPage(data.query.pages[firstId]);\n\n        // Check to make sure there is worthwhile content\n        if (page.content() !== undefined &&\n        !app.wiki.ambiguityChk(data, firstId)) {\n          place.wikiInfo(page);\n          app.viewmodel.setInfoWindow(place);\n        }\n      }).fail(function(data) {\n        var msg = 'Wikipedia Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    },\n\n    // Check for a disambiguity page(ie. no info - only links)\n    ambiguityChk: function(data, id) {\n      var categories = data.query.pages[id].categories;\n\n      for (var category in categories) {\n        if (categories[category].title ===\n          'Category:All article disambiguation pages') {\n          return true;\n        }\n        return false;\n      }\n    }\n  };\n})();\n","/* global app ko $ google document Awesomplete */\n\napp.viewmodel = app.viewmodel || {};\n\napp.viewmodel = {\n  mapError: ko.observable(),\n  places: ko.observableArray(),\n  placeList: [],\n  curMarker: null,\n  curPlace: ko.observable(),\n  inputText: ko.observable(''),\n  frsqr: null,\n  errorMsg: ko.observableArray([]),\n  infoWindow: ko.observable(false),\n  drawerOpen: ko.observable(false),\n  showModal: ko.observable(false),\n\n/* ************* */\n/* Constructors */\n/* ************ */\n  Place: function(place) {\n    this.show = ko.observable(true);\n\n    // Info returned from map.getPlaces\n    this.name = ko.observable(place.name);\n    this.rating = ko.observable(place.rating);\n    this.open = ko.observable(\n      place.opening_hours ? 'Open Now' : 'Closed' || 'Hours not available'\n    );\n    if (place.photos) {\n      this.photo = ko.observable({\n        url: ko.observable(place.photos[0].url),\n        height: ko.observable(place.photos[0].height),\n        width: ko.observable(place.photos[0].width),\n        attributions: ko.observable(place.photos[0].html_attributions)\n      } || {});\n    } else {\n      this.photo = ko.observable('none');\n    }\n    this.data = place;\n    this.detailsIcon = ko.observable('fa fa-chevron-circle-up');\n\n    // Info from elsewhere\n    this.details = ko.observable();\n    this.marker = app.map.createMarker(this);\n    this.wikiInfo = ko.observable();\n    this.frSqrInfo = ko.observable();\n  },\n\n  WikiPage: function(page) {\n    this.content = ko.observable(page.extract);\n    this.url = ko.observable(page.fullurl);\n  },\n\n  fourSquare: function(info, tips, place) {\n    // Map FourSquare responses to observables\n    var frSqrInfo = ko.mapping.fromJS(info, {});\n    var frSqrTips = ko.mapping.fromJS(tips, {});\n    // Create a child object for tips response\n    frSqrInfo.tips = frSqrTips;\n    // Assign the info to the place\n    place.frSqrInfo(frSqrInfo);\n  },\n\n  PlaceDetails: function(details) {\n    this.show = ko.observable(true);\n    this.address = ko.observable(details.formatted_address);\n    this.phone = ko.observable(details.formatted_phone_number);\n    this.photos = ko.observableArray(details.photos);\n    this.rating = ko.observable(details.rating);\n    this.website = ko.observable(details.website);\n    this.reviews = ko.observableArray(\n      new app.viewmodel.Reviews(details.reviews)\n    );\n  },\n\n  Reviews: function(reviews) {\n    var arr = [];\n    reviews.forEach(function(review) {\n      arr.push({\n        author: ko.observable(review.author_name),\n        authorUrl: ko.observable(review.author_url),\n        text: ko.observable(review.text),\n        time: ko.observable(review.time)\n      });\n    });\n    return arr;\n  },\n\n/* **************** */\n/* Helper Functions */\n/* **************** */\n  addError: function(msg) {\n    this.errorMsg = this.errorMsg || ko.observableArray([]);\n    this.errorMsg.push(msg);\n    setTimeout(function() {\n      app.viewmodel.clearErrors();\n    }, 2000);\n  },\n\n  clearErrors: function() {\n    this.errorMsg([]);\n  },\n\n  setCurrentPlace: function(place) {\n    if (app.viewmodel.curPlace().marker.getAnimation()) {\n      app.viewmodel.toggleBounce();\n    }\n    app.viewmodel.curPlace(place);\n  },\n\n  toggleDetails: function(place) {\n    if (place.details() !== undefined && place.details().show() === true) {\n      place.details().show(false);\n      place.detailsIcon('fa fa-chevron-circle-up');\n    } else {\n      app.map.getPlaceDetails(place);\n      app.viewmodel.setCurrentPlace(place);\n      place.detailsIcon('fa fa-chevron-circle-down');\n    }\n  },\n\n  clickContactInfo: function() {\n    this.inputText(this.curPlace().name());\n    app.viewmodel.placeFilter();\n    this.toggleDetails(app.viewmodel.curPlace());\n    app.map.infoWindow.close();\n    app.viewmodel.infoWindow(false);\n    this.toggleDrawer();\n  },\n\n  // Called when the marker or list item is clicked\n  clickHandler: function(place) {\n    var plc = place || this;\n\n    // Call for data\n    app.wiki.getWiki(plc);\n    app.foursquare.findPlace(plc);\n\n    // Handle map actions\n    app.map.infoWindow.close();\n    if (app.viewmodel.drawerOpen()) {\n      app.viewmodel.toggleDrawer();\n    }\n    app.viewmodel.setCurrentPlace(plc);\n    app.viewmodel.toggleBounce();\n  },\n\n  findPlaceByName: function(name) {\n    var places = app.viewmodel.places();\n    for (var i = places.length - 1; i >= 0; i--) {\n      if (places[i].name() === name) {\n        return places[i];\n      }\n    }\n    return false;\n  },\n\n  placeFilter: function() {\n    var self = this;\n\n    if (self.inputText()) {\n      var matches = self.places().filter(function(place) {\n        var name = place.name().toLowerCase();\n        var input = self.inputText().toLowerCase();\n        return name.indexOf(input) >= 0;\n      });\n\n      // Set markers and list items to hidden\n      self.places().forEach(function(place) {\n        place.marker.setMap(null);\n        place.show(false);\n      });\n\n      // Add remaining places to the map and list\n      matches.forEach(function(place) {\n        place.marker.setMap(app.map.map);\n        place.show(true);\n      });\n    } else {\n      // Set all place markers on the map\n      self.places().forEach(function(place) {\n        place.marker.setMap(app.map.map);\n        place.show(true);\n      });\n    }\n\n    return true;\n  },\n\n  resetFilter: function() {\n    app.viewmodel.inputText('');\n    app.viewmodel.placeFilter();\n    // Close details which are open\n    var places = this.places();\n    for (var i = places.length - 1; i >= 0; i--) {\n      if (places[i].details() && places[i].details().show()) {\n        places[i].details().show(false);\n        places[i].detailsIcon('fa fa-chevron-circle-up');\n      }\n    }\n  },\n\n  setInfoWindow: function(place) {\n    var content = $('#infowindow').html();\n\n    app.map.infoWindow.setContent(content);\n    app.map.infoWindow.open(app.map.map, place.marker);\n    // Hide the drawer button while infowindow is open\n    app.viewmodel.infoWindow(true);\n  },\n\n  toggleBounce: function() {\n    if (app.viewmodel.curPlace().marker.getAnimation()) {\n      app.viewmodel.curPlace().marker.setAnimation(null);\n    } else {\n      var marker = app.viewmodel.curPlace().marker;\n      marker.setAnimation(google.maps.Animation.BOUNCE);\n    }\n  },\n\n  toggleDrawer: function() {\n    app.viewmodel.drawerOpen(!app.viewmodel.drawerOpen());\n  },\n\n  setModal: function() {\n    app.viewmodel.showModal(!app.viewmodel.showModal());\n  },\n\n  autocomplete: function() {\n    var input = document.getElementById('place-input');\n    var awesomplete = new Awesomplete(input);\n    awesomplete.list = app.viewmodel.placeList;\n\n    input.addEventListener('awesomplete-selectcomplete', function() {\n      var place = app.viewmodel.findPlaceByName(this.value);\n      console.log(place);\n      app.viewmodel.setCurrentPlace(place);\n      app.viewmodel.toggleDetails(place);\n      app.viewmodel.inputText(this.value);\n      app.viewmodel.placeFilter();\n    });\n  }\n};\n\n"],"sourceRoot":"/source/"}
||||||| merged common ancestors
{"version":3,"sources":["main.js","map.js","foursquare.js","wiki.js","viewModel.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","update","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","e","console","error","app","map","init","home","lat","lng","el","document","getElementById","this","google","maps","Map","center","zoom","minZoom","maxZoom","mapTypeControl","placesApi","places","PlacesService","infoWindow","InfoWindow","maxWidth","$","width","event","addListener","viewmodel","showDrawerBtn","setTimeout","css","addListenerOnce","getPlaces","createPlaces","forEach","place","idx","plc","Place","push","curPlace","storePlaces","localStorage","setItem","JSON","stringify","retrievePlaces","parse","geometry","log","ko","applyBindings","request","bounds","getBounds","types","nearbySearch","results","status","setPhotoUrls","msg","addError","photos","url","getUrl","maxHeight","getPlaceDetails","placeId","data","place_id","getDetails","details","deets","PlaceDetails","createMarker","plcloc","marker","Marker","animation","Animation","DROP","attribution","source","icon","title","name","clickHandler","foursquare","CLIENTID","CLIENTSECRET","baseUrl","version","findPlace","loc","jQuery","ajax","query","ll","client_id","client_secret","v","limit","dataType","done","venue","response","venues","getTips","fail","statusText","id","tips","fourSquare","wiki","getWiki","action","prop","exintro","exchars","inprop","format","redirects","converttitles","titles","headers","Api-User-Agent","firstId","Object","keys","pages","page","WikiPage","undefined","content","ambiguityChk","wikiInfo","categories","category","observableArray","curMarker","observable","inputText","frsqr","errorMsg","show","rating","open","opening_hours","photo","height","attributions","html_attributions","detailsIcon","frSqrInfo","extract","fullurl","info","mapping","fromJS","frSqrTips","address","formatted_address","phone","formatted_phone_number","website","reviews","Reviews","arr","review","author","author_name","authorUrl","author_url","text","time","clearErrors","setCurrentPlace","getAnimation","toggleBounce","toggleDetails","clickContactInfo","trigger","close","closeDrawer","toggleDrawer","setInfoWindow","removeClass","addClass","placeFilter","self","matches","filter","toLowerCase","input","indexOf","setMap","resetFilter","html","setContent","setAnimation","BOUNCE","els","getElementsByClassName","toggleClass","hasClass","openModal","closeModal","button","addEventListener"],"mappings":";;;;;;;;;;;;;;;;;;CAsBA,WACA,YAMA,IAAAA,GAAAC,QAAA,cAAAC,OAAAC,SAAAC,UAEA,UAAAF,OAAAC,SAAAC,UAEAF,OAAAC,SAAAC,SAAAC,MACA,0DAIA,kBAAAC,aACA,WAAAJ,OAAAC,SAAAI,UAAAP,IACAM,UAAAE,cAAAC,SAAA,qBACAC,KAAA,SAAAC,GAIA,kBAAAA,GAAAC,QACAD,EAAAC,SAIAD,EAAAE,cAAA,WAKA,GAAAP,UAAAE,cAAAM,WAAA,CAGA,GAAAC,GAAAJ,EAAAK,UAEAD,GAAAE,cAAA,WACA,OAAAF,EAAAG,OACA,IAAA,YAKA,KAEA,KAAA,YACA,KAAA,IAAAC,OAAA,yDA9BAb,SAuCA,SAAAc,GACAC,QAAAC,MAAA,4CAAAF,OAMA,IAAAG,KAAAA,OCrFAA,KAAAC,IAAAD,IAAAC,QAEA,WACAD,IAAAC,KAEAC,KAAA,WACA,GAAAC,IAAAC,IAAA,UAAAC,IAAA,YACAC,EAAAC,SAAAC,eAAA,gBAEAC,MAAAR,IAAA,GAAAS,QAAAC,KAAAC,IAAAN,GACAO,OAAAV,EACAW,KAAA,GACAC,QAAA,GACAC,QAAA,GACAC,gBAAA,IAEAR,KAAAS,UAAA,GAAAR,QAAAC,KAAAQ,OAAAC,cAAApB,IAAAC,IAAAA,KACAQ,KAAAY,WAAA,GAAAX,QAAAC,KAAAW,YACAC,SAAA,GAAAC,EAAA7C,QAAA8C,UAGAf,OAAAC,KAAAe,MAAAC,YACAlB,KAAAY,WAAA,aAAArB,IAAA4B,UAAAC,eAIAC,WAAA,WACAN,EAAA,eAAAO,IAAA,UAAA,WACA,KAEArB,OAAAC,KAAAe,MAAAM,gBACAvB,KAAAR,IAAA,iBAAAQ,KAAAwB,YAIAC,aAAA,SAAAf,GACAA,EAAAgB,QAAA,SAAAC,EAAAC,GACA,GAAAC,GAAA,GAAAtC,KAAA4B,UAAAW,MAAAH,EAEApC,KAAA4B,UAAAT,OAAAqB,KAAAF,GACA,IAAAD,GACArC,IAAA4B,UAAAa,SAAAH,MAMAI,YAAA,SAAAvB,GACAwB,aAAAC,QAAA,SAAAC,KAAAC,UAAA3B,KAGA4B,eAAA,WACA,GAAA5B,GAAA0B,KAAAG,MAAAL,aAAAxB,OAYA,OAXAA,GAAAgB,QAAA,SAAAC,GACA,GAAAhC,GAAAgC,EAAAa,SAAArE,SAAAwB,IACAC,EAAA+B,EAAAa,SAAArE,SAAAyB,GAEA+B,GAAAa,SAAArE,SAAAwB,IAAA,WACA,MAAAA,IAEAgC,EAAAa,SAAArE,SAAAyB,IAAA,WACA,MAAAA,MAGAc,GAIAc,UAAA,WACA,GAAAU,aAAAxB,OACArB,QAAAoD,IAAA,gCACAlD,IAAAC,IAAAiC,aAAAlC,IAAAC,IAAA8C,kBACAI,GAAAC,cAAApD,IAAA4B,eACA,CAEA,GAAAyB,IACAC,OAAAtD,IAAAC,IAAAA,IAAAsD,YACAC,OAAA,cAAA,SAAA,QAIAxD,KAAAC,IAAAiB,UAAAuC,aAAAJ,EAAA,SAAAK,EAAAC,GAEA,GADA7D,QAAAoD,IAAA,sBACA,OAAAS,EACA3D,IAAAC,IAAA2D,aAAAF,GACA1D,IAAAC,IAAAyC,YAAAgB,GACA1D,IAAAC,IAAAiC,aAAAwB,OACA,CACA5D,QAAAoD,IAAA,yBACA,IAAAW,GAAA,wBAAAF,CACA3D,KAAA4B,UAAAkC,SAAAD,GAEAV,GAAAC,cAAApD,IAAA4B,eAKAgC,aAAA,SAAAzC,GACAA,EAAAgB,QAAA,SAAAC,GACA,GAAAA,EAAA2B,OAAA,CACA,GAAAC,GAAA5B,EAAA2B,OAAA,GAAAE,QAAA1C,SAAA,IACA2C,UAAA,KACA9B,GAAA2B,OAAA,GAAAC,IAAAA,MAKAG,gBAAA,SAAA/B,GACA,GAAAiB,IACAe,QAAAhC,EAAAiC,KAAAC,SAGAtE,KAAAC,IAAAiB,UAAAqD,WAAAlB,EAAA,SAAAmB,EAAAb,GAEA,GADA7D,QAAAoD,IAAA,SAAAS,GACA,OAAAA,EAAA,CACA,GAAAc,GAAA,GAAAzE,KAAA4B,UAAA8C,aAAAF,EACApC,GAAAoC,QAAAC,OACA,CACA,GAAAZ,GAAA,8CAAAF,CACA3D,KAAA4B,UAAAkC,SAAAD,OAKAc,aAAA,SAAAvC,GAEA,GAAAwC,GAAAxC,EAAAiC,KAAApB,SAAArE,SAEAiG,EAAA,GAAAnE,QAAAC,KAAAmE,QACAC,UAAArE,OAAAC,KAAAqE,UAAAC,KACAC,aAAAC,OAAA,wCACAC,KAAAhD,EAAAiC,KAAAe,KACAnF,IAAAD,IAAAC,IAAAA,IACAmC,OACAxD,UAAAwB,IAAAwE,EAAAxE,MAAAC,IAAAuE,EAAAvE,OACA+D,QAAAhC,EAAAiC,KAAAC,UAEAe,MAAAjD,EAAAiC,KAAAiB,MAMA,OAHA5E,QAAAC,KAAAe,MAAAC,YAAAkD,EAAA,QAAA,WACA7E,IAAA4B,UAAA2D,aAAAnD,KAEAyC,OC/IA7E,IAAAwF,WAAAxF,IAAAwF,eAEA,WAEA,GAAAC,GAAA,mDACAC,EAAA,kDAEA1F,KAAAwF,YACAG,QAAA,wCACAC,QAAA,WAEAC,UAAA,SAAAzD,GACA,GAAA0D,GAAA1D,EAAAiC,KAAApB,SAAArE,QAEAmH,QAAAC,MACAhC,IAAAvD,KAAAkF,QAAA,SACAtB,MACA4B,MAAA7D,EAAAkD,OACAY,GAAAJ,EAAA1F,MAAA,IAAA0F,EAAAzF,MAEA8F,UAAAV,EACAW,cAAAV,EACAW,EAAA5F,KAAAmF,QACAU,MAAA,KAEAC,SAAA,SAEAC,KAAA,SAAAnC,GAEA,GAAAoC,GAAApC,EAAAqC,SAAAC,OAAA,EAGA3G,KAAAwF,WAAAoB,QAAAH,EAAArE,KACAyE,KAAA,SAAAxC,GACA,GAAAR,GAAA,qBAAAQ,EAAAyC,UACA9G,KAAA4B,UAAAkC,SAAAD,MAIA+C,QAAA,SAAAH,EAAArE,GACA2D,OAAAC,MACAhC,IAAAvD,KAAAkF,QAAAc,EAAAM,GAAA,QACA1C,MAEA8B,UAAAV,EACAW,cAAAV,EACAW,EAAA5F,KAAAmF,SAEAW,SAAA,SACAC,KAAA,SAAAnC,GACA,GAAA2C,GAAA3C,EAAAqC,SAAAM,IAEAhH,KAAA4B,UAAAqF,WAAAR,EAAAO,EAAA5E,KACAyE,KAAA,SAAAxC,GACA,GAAAR,GAAA,0BAAAQ,EAAAyC,UACA9G,KAAA4B,UAAAkC,SAAAD,UCvDA7D,IAAAkH,KAAAlH,IAAAkH,SAEA,WACAlH,IAAAkH,MACAC,QAAA,SAAA/E,GACA2D,OAAAC,MACAhC,IAAA,qCACAK,MACA+C,OAAA,QACAC,KAAA,2BACAC,QAAA,GACAC,QAAA,IACAC,OAAA,MACAC,OAAA,OACAC,UAAA,GACAC,cAAA,GACAC,OAAAxF,EAAAkD,QAEAiB,SAAA,QACAsB,SAAAC,iBAAA,4BAEAtB,KAAA,SAAAnC,GACA,GAAA0D,GAAAC,OAAAC,KAAA5D,EAAA4B,MAAAiC,OAAA,GACAC,EAAA,GAAAnI,KAAA4B,UAAAwG,SAAA/D,EAAA4B,MAAAiC,MAAAH,GAGAM,UAAAF,EAAAG,WACAtI,IAAAkH,KAAAqB,aAAAlE,EAAA0D,IACA3F,EAAAoG,SAAAL,KAEAtB,KAAA,SAAAxC,GACA,GAAAR,GAAA,oBAAAQ,EAAAyC,UACA9G,KAAA4B,UAAAkC,SAAAD,MAKA0E,aAAA,SAAAlE,EAAA0C,GACA,GAAA0B,GAAApE,EAAA4B,MAAAiC,MAAAnB,GAAA0B,UAEA,KAAA,GAAAC,KAAAD,GACA,MACA,8CADAA,EAAAC,GAAArD,OAEA,GAEA,OC5CArF,IAAA4B,UAAA5B,IAAA4B,cAEA5B,IAAA4B,WACAT,OAAAgC,GAAAwF,kBACAC,UAAA,KACAnG,SAAAU,GAAA0F,aACAC,UAAA3F,GAAA0F,WAAA,IACAE,MAAA,KACAC,SAAA7F,GAAAwF,oBAKApG,MAAA,SAAAH,GACA3B,KAAAwI,KAAA9F,GAAA0F,YAAA,GAGApI,KAAA6E,KAAAnC,GAAA0F,WAAAzG,EAAAkD,MACA7E,KAAAyI,OAAA/F,GAAA0F,WAAAzG,EAAA8G,QACAzI,KAAA0I,KAAAhG,GAAA0F,WACAzG,EAAAgH,cAAA,WAAA,UAEAhH,EAAA2B,OACAtD,KAAA4I,MAAAlG,GAAA0F,YACA7E,IAAAb,GAAA0F,WAAAzG,EAAA2B,OAAA,GAAAC,KACAsF,OAAAnG,GAAA0F,WAAAzG,EAAA2B,OAAA,GAAAuF,QACA7H,MAAA0B,GAAA0F,WAAAzG,EAAA2B,OAAA,GAAAtC,OACA8H,aAAApG,GAAA0F,WAAAzG,EAAA2B,OAAA,GAAAyF,yBAGA/I,KAAA4I,MAAAlG,GAAA0F,WAAA,QAEApI,KAAA4D,KAAAjC,EACA3B,KAAAgJ,YAAAtG,GAAA0F,WAAA,2BAGApI,KAAA+D,QAAArB,GAAA0F,aACApI,KAAAoE,OAAA7E,IAAAC,IAAA0E,aAAAlE,MACAA,KAAA+H,SAAArF,GAAA0F,aACApI,KAAAiJ,UAAAvG,GAAA0F,cAGAT,SAAA,SAAAD,GACA1H,KAAA6H,QAAAnF,GAAA0F,WAAAV,EAAAwB,SACAlJ,KAAAuD,IAAAb,GAAA0F,WAAAV,EAAAyB,UAGA3C,WAAA,SAAA4C,EAAA7C,EAAA5E,GAEA,GAAAsH,GAAAvG,GAAA2G,QAAAC,OAAAF,MACAG,EAAA7G,GAAA2G,QAAAC,OAAA/C,KAEA0C,GAAA1C,KAAAgD,EAEA5H,EAAAsH,UAAAA,IAGAhF,aAAA,SAAAF,GACA/D,KAAAwI,KAAA9F,GAAA0F,YAAA,GACApI,KAAAwJ,QAAA9G,GAAA0F,WAAArE,EAAA0F,mBACAzJ,KAAA0J,MAAAhH,GAAA0F,WAAArE,EAAA4F,wBACA3J,KAAAsD,OAAAZ,GAAAwF,gBAAAnE,EAAAT,QACAtD,KAAAyI,OAAA/F,GAAA0F,WAAArE,EAAA0E,QACAzI,KAAA4J,QAAAlH,GAAA0F,WAAArE,EAAA6F,SACA5J,KAAA6J,QAAAnH,GAAAwF,gBACA,GAAA3I,KAAA4B,UAAA2I,QAAA/F,EAAA8F,WAIAC,QAAA,SAAAD,GACA,GAAAE,KASA,OARAF,GAAAnI,QAAA,SAAAsI,GACAD,EAAAhI,MACAkI,OAAAvH,GAAA0F,WAAA4B,EAAAE,aACAC,UAAAzH,GAAA0F,WAAA4B,EAAAI,YACAC,KAAA3H,GAAA0F,WAAA4B,EAAAK,MACAC,KAAA5H,GAAA0F,WAAA4B,EAAAM,UAGAP,GAMA1G,SAAA,SAAAD,GACApD,KAAAuI,SAAAvI,KAAAuI,UAAA7F,GAAAwF,oBACAlI,KAAAuI,SAAAxG,KAAAqB,GACA/B,WAAA,WACA9B,IAAA4B,UAAAoJ,eACA,MAGAA,YAAA,WACAvK,KAAAuI,cAGAiC,gBAAA,SAAA7I,GACApC,IAAA4B,UAAAa,WAAAoC,OAAAqG,gBACAlL,IAAA4B,UAAAuJ,eAEAnL,IAAA4B,UAAAa,SAAAL,IAGAgJ,cAAA,SAAAhJ,GACAiG,SAAAjG,EAAAoC,WAAApC,EAAAoC,UAAAyE,UAAA,GACA7G,EAAAoC,UAAAyE,MAAA,GACA7G,EAAAqH,YAAA,6BAEAzJ,IAAAC,IAAAkE,gBAAA/B,GACApC,IAAA4B,UAAAqJ,gBAAA7I,GACAA,EAAAqH,YAAA,+BAIA4B,iBAAA,WACA5K,KAAAqI,UAAArI,KAAAgC,WAAA6C,QACA9D,EAAA,qBAAA8J,QAAA,SACA7K,KAAA2K,cAAApL,IAAA4B,UAAAa,YACAzC,IAAAC,IAAAoB,WAAAkK,QACA9K,KAAA+K,cACA/K,KAAAgL,gBAIAlG,aAAA,SAAAnD,GACA,GAAAE,GAAAF,GAAA3B,IAGAT,KAAAkH,KAAAC,QAAA7E,GACAtC,IAAAwF,WAAAK,UAAAvD,GAIAtC,IAAAC,IAAAoB,WAAAkK,QACAvL,IAAA4B,UAAA4J,cACAxL,IAAA4B,UAAAqJ,gBAAA3I,GACAtC,IAAA4B,UAAAuJ,eAIArJ,WAAA,WACA9B,IAAA4B,UAAA8J,cAAApJ,GAEAd,EAAA,eAAAmK,YAAA,UACAnK,EAAA,eAAAoK,SAAA,SACA,MAGAC,YAAA,WACA,GAAAC,GAAArL,IAgCA,OA9BAqB,YAAA,WAEA,GAAAgK,EAAAhD,YAAA,CACA,GAAAiD,GAAAD,EAAA3K,SAAA6K,OAAA,SAAA5J,GACA,GAAAkD,GAAAlD,EAAAkD,OAAA2G,cACAC,EAAAJ,EAAAhD,YAAAmD,aACA,OAAA,KAAA3G,EAAA6G,QAAAD,IAIAJ,GAAA3K,SAAAgB,QAAA,SAAAC,GACAA,EAAAyC,OAAAuH,OAAA,MACAhK,EAAA6G,MAAA,KAIA8C,EAAA5J,QAAA,SAAAC,GACAA,EAAAyC,OAAAuH,OAAApM,IAAAC,IAAAA,KACAmC,EAAA6G,MAAA,SAIA6C,GAAA3K,SAAAgB,QAAA,SAAAC,GACAA,EAAAyC,OAAAuH,OAAApM,IAAAC,IAAAA,KACAmC,EAAA6G,MAAA,MAGA,MAGA,GAGAoD,YAAA,WACArM,IAAA4B,UAAAkH,UAAA,IACAtH,EAAA,qBAAA8J,QAAA,UAGAI,cAAA,SAAAtJ,GACA,GAAAkG,GAAA9G,EAAA,eAAA8K,MAEAtM,KAAAC,IAAAoB,WAAAkL,WAAAjE,GACAtI,IAAAC,IAAAoB,WAAA8H,KAAAnJ,IAAAC,IAAAA,IAAAmC,EAAAyC,SAIAsG,aAAA,WACA,GAAAnL,IAAA4B,UAAAa,WAAAoC,OAAAqG,eACAlL,IAAA4B,UAAAa,WAAAoC,OAAA2H,aAAA,UACA,CACA,GAAA3H,GAAA7E,IAAA4B,UAAAa,WAAAoC,MACAA,GAAA2H,aAAA9L,OAAAC,KAAAqE,UAAAyH,UAIAhB,aAAA,WACA,GAAAiB,GAAAnM,SAAAoM,uBAAA,SACAnL,GAAAkL,GAAAE,YAAA,gBAGApB,YAAA,WAEA,GAAAlL,GAAAkB,EAAA,cACAlB,GAAAuM,SAAA,UACAvM,EAAAqL,YAAA,QACArL,EAAAsL,SAAA,WAGApK,EAAA,mBAAAqL,SAAA,SACA7M,IAAA4B,UAAA6J,gBAIA5J,cAAA,WACAL,EAAA,eAAAmK,YAAA,QACAnK,EAAA,eAAAoK,SAAA,WAGAkB,UAAA,WACAtL,EAAA,UAAAO,IAAA,UAAA,WACAjC,QAAAoD,IAAA,eAGA6J,WAAA,WACAvL,EAAA,UAAAO,IAAA,UAAA,SAGA7B,KAAA,WACA,GAAA8M,GAAAzM,SAAAC,eAAA,aACAwM,GAAAC,iBAAA,QAAAjN,IAAA4B,UAAA6J,gBAIAzL,IAAA4B,UAAA1B","file":"main.min.js","sourcesContent":["/*!\n *\n *  Web Starter Kit\n *  Copyright 2015 Google Inc. All rights reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    https://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License\n *\n */\n/* eslint-env browser */\n\n/* I disabled the service worker */\n/* Uncomment everyting from here to get back to default */\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // Check to see if there's an updated version of service-worker.js with\n      // new files to cache:\n      // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-registration-update-method\n      if (typeof registration.update === 'function') {\n        registration.update();\n      }\n\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n})();\n\n/* global */\nvar app = app || {};\n","/* global app document google $ window ko localStorage */\napp.map = app.map || {};\n\n(function() {\n  app.map = {\n    // Callback function for Google Maps - Initialize the Map\n    init: function() {\n      var home = {lat: 39.927677, lng: -75.171909};\n      var el = document.getElementById('map-container');\n\n      this.map = new google.maps.Map(el, {\n        center: home,\n        zoom: 14,\n        minZoom: 12,\n        maxZoom: 18,\n        mapTypeControl: false\n      });\n      this.placesApi = new google.maps.places.PlacesService(app.map.map);\n      this.infoWindow = new google.maps.InfoWindow({\n        maxWidth: $(window).width() * 0.7}\n      );\n      // Show the drawer button when infowindow closes\n      google.maps.event.addListener(\n        this.infoWindow, 'closeclick', app.viewmodel.showDrawerBtn\n      );\n\n      // Show error message - if maps can't be reached, will be visible\n      setTimeout(function() {\n        $('#maps-error').css('display', 'inline');\n      }, 5000);\n      // Load places once the maps bounds are set\n      google.maps.event.addListenerOnce(\n        this.map, 'bounds_changed', this.getPlaces\n      );\n    },\n\n    createPlaces: function(places) {\n      places.forEach(function(place, idx) {\n        var plc = new app.viewmodel.Place(place);\n\n        app.viewmodel.places.push(plc);\n        if (idx === 1) {\n          app.viewmodel.curPlace(plc);\n        }\n      });\n    },\n\n    // Likely against TOS, but figure it's fine for educational purposes\n    storePlaces: function(places) {\n      localStorage.setItem('places', JSON.stringify(places));\n    },\n\n    retrievePlaces: function() {\n      var places = JSON.parse(localStorage.places);\n      places.forEach(function(place) {\n        var lat = place.geometry.location.lat;\n        var lng = place.geometry.location.lng;\n        // Make lat/lng into functions to match API results\n        place.geometry.location.lat = function() {\n          return lat;\n        };\n        place.geometry.location.lng = function() {\n          return lng;\n        };\n      });\n      return places;\n    },\n\n    // Get a list of places from Google Maps\n    getPlaces: function() {\n      if (localStorage.places) {\n        console.log('Creating places from storage');\n        app.map.createPlaces(app.map.retrievePlaces());\n        ko.applyBindings(app.viewmodel);\n      } else {\n        // Variables for the request\n        var request = {\n          bounds: app.map.map.getBounds(),\n          types: ['art_gallery', 'museum', 'park']\n        };\n\n        // Call the Places API\n        app.map.placesApi.nearbySearch(request, function(results, status) {\n          console.log('Calling Places API');\n          if (status === 'OK') {\n            app.map.setPhotoUrls(results);\n            app.map.storePlaces(results);\n            app.map.createPlaces(results);\n          } else {\n            console.log('We have a places error');\n            var msg = 'Google Places Error: ' + status;\n            app.viewmodel.addError(msg);\n          }\n          ko.applyBindings(app.viewmodel);\n        });\n      }\n    },\n\n    setPhotoUrls: function(places) {\n      places.forEach(function(place) {\n        if (place.photos) {\n          var url = place.photos[0].getUrl({maxWidth: 200,\n                                            maxHeight: 300});\n          place.photos[0].url = url;\n        }\n      });\n    },\n\n    getPlaceDetails: function(place) {\n      var request = {\n        placeId: place.data.place_id\n      };\n      // Call the Places API, add details to the place\n      app.map.placesApi.getDetails(request, function(details, status) {\n        console.log('status', status);\n        if (status === 'OK') {\n          var deets = new app.viewmodel.PlaceDetails(details);\n          place.details(deets);\n        } else {\n          var msg = 'Google Places Error while getting details: ' + status;\n          app.viewmodel.addError(msg);\n        }\n      });\n    },\n\n    createMarker: function(place) {\n      // Location for the Marker\n      var plcloc = place.data.geometry.location;\n      // Create the marker\n      var marker = new google.maps.Marker({\n        animation: google.maps.Animation.DROP,\n        attribution: {source: 'mrkjesus2.github.io/Neighborhood-Map'},\n        icon: place.data.icon,\n        map: app.map.map,\n        place: {\n          location: {lat: plcloc.lat(), lng: plcloc.lng()},\n          placeId: place.data.place_id\n        },\n        title: place.data.name\n      });\n\n      google.maps.event.addListener(marker, 'click', function() {\n        app.viewmodel.clickHandler(place);\n      });\n      return marker;\n    }\n  };\n})();\n","/* global app jQuery */\napp.foursquare = app.foursquare || {};\n\n(function() {\n  // TODO: Move this to a config file (keep out of git)\n  var CLIENTID = 'ZBGAM3NOJCK4P345ELK2JIB232FMDENJ05GXYQRSAHOHURJR';\n  var CLIENTSECRET = 'RGEF2DNONIR0AN2GHSIIMGZWLT0IH5JSJCJ5AGFAJ2WZDGLH';\n\n  app.foursquare = {\n    baseUrl: 'https://api.foursquare.com/v2/venues/',\n    version: '20140806',\n\n    findPlace: function(place) {\n      var loc = place.data.geometry.location;\n      // Call the foursquare API\n      jQuery.ajax({\n        url: this.baseUrl + 'search',\n        data: {\n          query: place.name(),\n          ll: loc.lat() + ',' + loc.lng(),\n          // Disabled lines due to API requirements\n          client_id: CLIENTID, // eslint-disable-line camelcase\n          client_secret: CLIENTSECRET, // eslint-disable-line camelcase\n          v: this.version,\n          limit: '1'\n        },\n        dataType: 'json'\n\n      }).done(function(data) {\n        // Best matching venue\n        var venue = data.response.venues[0];\n\n        // Call the API again for venue tips\n        app.foursquare.getTips(venue, place);\n      }).fail(function(data) {\n        var msg = 'Foursquare Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    },\n\n    getTips: function(venue, place) {\n      jQuery.ajax({\n        url: this.baseUrl + venue.id + '/tips',\n        data: {\n          // Disabled lines due to API requirements\n          client_id: CLIENTID, // eslint-disable-line camelcase\n          client_secret: CLIENTSECRET, // eslint-disable-line camelcase\n          v: this.version\n        },\n        dataType: 'json'\n      }).done(function(data) {\n        var tips = data.response.tips;\n        // Assign details to place\n        app.viewmodel.fourSquare(venue, tips, place);\n      }).fail(function(data) {\n        var msg = 'Foursquare Tips Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    }\n  };\n})();\n","/* global app jQuery */\napp.wiki = app.wiki || {};\n\n(function() {\n  app.wiki = {\n    getWiki: function(place) {\n      jQuery.ajax({\n        url: 'https://en.wikipedia.org/w/api.php',\n        data: {\n          action: 'query',\n          prop: 'categories|extracts|info',\n          exintro: '',\n          exchars: 1000,\n          inprop: 'url',\n          format: 'json',\n          redirects: '',\n          converttitles: '',\n          titles: place.name()\n        },\n        dataType: 'jsonp',\n        headers: {'Api-User-Agent': 'Mark\\'s Udacity Project'}\n\n      }).done(function(data) {\n        var firstId = Object.keys(data.query.pages)['0'];\n        var page = new app.viewmodel.WikiPage(data.query.pages[firstId]);\n\n        // Check to make sure there is worthwhile content\n        if (page.content() !== undefined &&\n        !app.wiki.ambiguityChk(data, firstId)) {\n          place.wikiInfo(page);\n        }\n      }).fail(function(data) {\n        var msg = 'Wikipedia Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    },\n\n    // Check for a disambiguity page(ie. no info - only links)\n    ambiguityChk: function(data, id) {\n      var categories = data.query.pages[id].categories;\n\n      for (var category in categories) {\n        if (categories[category].title ===\n          'Category:All article disambiguation pages') {\n          return true;\n        }\n        return false;\n      }\n    }\n  };\n})();\n","/* global app ko $ google document */\n\napp.viewmodel = app.viewmodel || {};\n\napp.viewmodel = {\n  places: ko.observableArray(),\n  curMarker: null,\n  curPlace: ko.observable(),\n  inputText: ko.observable(''),\n  frsqr: null,\n  errorMsg: ko.observableArray([]),\n\n/* ************* */\n/* Constructors */\n/* ************ */\n  Place: function(place) {\n    this.show = ko.observable(true);\n\n    // Info returned from map.getPlaces\n    this.name = ko.observable(place.name);\n    this.rating = ko.observable(place.rating);\n    this.open = ko.observable(\n      place.opening_hours ? 'Open Now' : 'Closed' || 'Hours not available'\n    );\n    if (place.photos) {\n      this.photo = ko.observable({\n        url: ko.observable(place.photos[0].url),\n        height: ko.observable(place.photos[0].height),\n        width: ko.observable(place.photos[0].width),\n        attributions: ko.observable(place.photos[0].html_attributions)\n      } || {});\n    } else {\n      this.photo = ko.observable('none');\n    }\n    this.data = place;\n    this.detailsIcon = ko.observable('fa fa-chevron-circle-up');\n\n    // Info from elsewhere\n    this.details = ko.observable();\n    this.marker = app.map.createMarker(this);\n    this.wikiInfo = ko.observable();\n    this.frSqrInfo = ko.observable();\n  },\n\n  WikiPage: function(page) {\n    this.content = ko.observable(page.extract);\n    this.url = ko.observable(page.fullurl);\n  },\n\n  fourSquare: function(info, tips, place) {\n    // Map FourSquare responses to observables\n    var frSqrInfo = ko.mapping.fromJS(info, {});\n    var frSqrTips = ko.mapping.fromJS(tips, {});\n    // Create a child object for tips response\n    frSqrInfo.tips = frSqrTips;\n    // Assign the info to the place\n    place.frSqrInfo(frSqrInfo);\n  },\n\n  PlaceDetails: function(details) {\n    this.show = ko.observable(true);\n    this.address = ko.observable(details.formatted_address);\n    this.phone = ko.observable(details.formatted_phone_number);\n    this.photos = ko.observableArray(details.photos);\n    this.rating = ko.observable(details.rating);\n    this.website = ko.observable(details.website);\n    this.reviews = ko.observableArray(\n      new app.viewmodel.Reviews(details.reviews)\n    );\n  },\n\n  Reviews: function(reviews) {\n    var arr = [];\n    reviews.forEach(function(review) {\n      arr.push({\n        author: ko.observable(review.author_name),\n        authorUrl: ko.observable(review.author_url),\n        text: ko.observable(review.text),\n        time: ko.observable(review.time)\n      });\n    });\n    return arr;\n  },\n\n/* **************** */\n/* Helper Functions */\n/* **************** */\n  addError: function(msg) {\n    this.errorMsg = this.errorMsg || ko.observableArray([]);\n    this.errorMsg.push(msg);\n    setTimeout(function() {\n      app.viewmodel.clearErrors();\n    }, 2000);\n  },\n\n  clearErrors: function() {\n    this.errorMsg([]);\n  },\n\n  setCurrentPlace: function(place) {\n    if (app.viewmodel.curPlace().marker.getAnimation()) {\n      app.viewmodel.toggleBounce();\n    }\n    app.viewmodel.curPlace(place);\n  },\n\n  toggleDetails: function(place) {\n    if (place.details() !== undefined && place.details().show() === true) {\n      place.details().show(false);\n      place.detailsIcon('fa fa-chevron-circle-up');\n    } else {\n      app.map.getPlaceDetails(place);\n      app.viewmodel.setCurrentPlace(place);\n      place.detailsIcon('fa fa-chevron-circle-down');\n    }\n  },\n\n  clickContactInfo: function() {\n    this.inputText(this.curPlace().name());\n    $('#drawer-top input').trigger('input');\n    this.toggleDetails(app.viewmodel.curPlace());\n    app.map.infoWindow.close();\n    this.closeDrawer();\n    this.toggleDrawer();\n  },\n\n  // Called when the marker or list item is clicked\n  clickHandler: function(place) {\n    var plc = place || this;\n\n    // Call for data\n    app.wiki.getWiki(plc);\n    app.foursquare.findPlace(plc);\n    // app.map.getPlaceDetails(plc);\n\n    // Handle map actions\n    app.map.infoWindow.close();\n    app.viewmodel.closeDrawer();\n    app.viewmodel.setCurrentPlace(plc);\n    app.viewmodel.toggleBounce();\n    // app.viewmodel.markerSetup(plc);\n\n    // Timeout to avoid two calls from success callbacks\n    setTimeout(function() {\n      app.viewmodel.setInfoWindow(plc);\n      // Hide the drawer button while infowindow is open\n      $('#drawer-btn').removeClass('closed');\n      $('#drawer-btn').addClass('open');\n    }, 300);\n  },\n\n  placeFilter: function() {\n    var self = this;\n    // A cushion to allow inputText to change\n    setTimeout(function() {\n      // Get the matching places\n      if (self.inputText()) {\n        var matches = self.places().filter(function(place) {\n          var name = place.name().toLowerCase();\n          var input = self.inputText().toLowerCase();\n          return name.indexOf(input) === 0;\n        });\n\n        // Set markers and list items to hidden\n        self.places().forEach(function(place) {\n          place.marker.setMap(null);\n          place.show(false);\n        });\n\n        // Add remaining places to the map and list\n        matches.forEach(function(place) {\n          place.marker.setMap(app.map.map);\n          place.show(true);\n        });\n      } else {\n        // Set all place markers on the map\n        self.places().forEach(function(place) {\n          place.marker.setMap(app.map.map);\n          place.show(true);\n        });\n      }\n    }, 100);\n\n    // Must return true to allow default behavior (Filling the input box)\n    return true;\n  },\n\n  resetFilter: function() {\n    app.viewmodel.inputText('');\n    $('#drawer-top input').trigger('input');\n  },\n\n  setInfoWindow: function(place) {\n    var content = $('#infowindow').html();\n\n    app.map.infoWindow.setContent(content);\n    app.map.infoWindow.open(app.map.map, place.marker);\n  },\n\n  // Strictly view related (create a separate file if there is more)\n  toggleBounce: function() {\n    if (app.viewmodel.curPlace().marker.getAnimation()) {\n      app.viewmodel.curPlace().marker.setAnimation(null);\n    } else {\n      var marker = app.viewmodel.curPlace().marker;\n      marker.setAnimation(google.maps.Animation.BOUNCE);\n    }\n  },\n\n  toggleDrawer: function() {\n    var els = document.getElementsByClassName('drawer');\n    $(els).toggleClass('closed open');\n  },\n\n  closeDrawer: function() {\n    // Reset drawer button if infowindow is open\n    var el = $('#drawer-btn');\n    if (el.hasClass('open')) {\n      el.removeClass('open');\n      el.addClass('closed');\n    }\n    // Close the drawer if it is open\n    if ($('#drawer-content').hasClass('open')) {\n      app.viewmodel.toggleDrawer();\n    }\n  },\n\n  showDrawerBtn: function() {\n    $('#drawer-btn').removeClass('open');\n    $('#drawer-btn').addClass('closed');\n  },\n\n  openModal: function() {\n    $('#modal').css('display', 'initial');\n    console.log('Open Modal');\n  },\n\n  closeModal: function() {\n    $('#modal').css('display', 'none');\n  },\n\n  init: function() {\n    var button = document.getElementById('drawer-btn');\n    button.addEventListener('click', app.viewmodel.toggleDrawer);\n  }\n};\n\napp.viewmodel.init();\n"],"sourceRoot":"/source/"}
=======
{"version":3,"sources":["awesomplete.js","main.js","map.js","foursquare.js","wiki.js","viewModel.js"],"names":["configure","instance","properties","o","i","initial","attrValue","input","getAttribute","toLowerCase","parseInt","Function","$","expr","con","document","querySelector","$$","slice","call","querySelectorAll","init","forEach","_","me","this","setAttribute","minChars","maxItems","autoFirst","filter","FILTER_CONTAINS","sort","SORT_BYLENGTH","item","ITEM","replace","REPLACE","index","container","create","className","around","ul","hidden","inside","status","role","aria-live","aria-relevant","bind","evaluate","blur","close","keydown","evt","c","keyCode","opened","selected","preventDefault","select","form","submit","mousedown","li","target","test","nodeName","parentNode","button","hasAttribute","list","removeAttribute","all","push","prototype","Array","isArray","_list","indexOf","split","children","apply","map","el","textContent","trim","activeElement","fire","open","next","count","length","previous","goto","lis","origin","allowed","text","data","suggestions","siblingIndex","value","innerHTML","appendChild","RegExp","regExpEscape","FILTER_STARTSWITH","a","b","html","aria-selected","tag","element","createElement","val","ref","insertBefore","event","callback","addEventListener","type","createEvent","initEvent","j","dispatchEvent","s","previousElementSibling","Document","readyState","self","Awesomplete","module","exports","isLocalhost","Boolean","window","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","update","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","e","console","error","app","home","lat","lng","getElementById","google","maps","Map","center","zoom","minZoom","maxZoom","mapTypeControl","placesApi","places","PlacesService","infoWindow","InfoWindow","maxWidth","width","addListener","viewmodel","setTimeout","mapError","addListenerOnce","getPlaces","createPlaces","place","idx","plc","Place","placeList","name","curPlace","autocomplete","storePlaces","localStorage","setItem","JSON","stringify","retrievePlaces","parse","geometry","sameBoundsCheck","log","ko","applyBindings","getBounds","request","bounds","types","nearbySearch","results","setPhotoUrls","msg","addError","oldBounds","equals","photos","url","getUrl","maxHeight","getPlaceDetails","placeId","place_id","getDetails","details","deets","PlaceDetails","createMarker","plcloc","image","icon","scaledSize","Size","marker","Marker","animation","Animation","DROP","attribution","source","title","clickHandler","foursquare","CLIENTID","CLIENTSECRET","baseUrl","version","findPlace","loc","jQuery","ajax","query","ll","client_id","client_secret","v","limit","dataType","done","venue","response","venues","getTips","fail","statusText","id","tips","fourSquare","setInfoWindow","wiki","getWiki","action","prop","exintro","exchars","inprop","format","redirects","converttitles","titles","headers","Api-User-Agent","firstId","Object","keys","pages","page","WikiPage","undefined","content","ambiguityChk","wikiInfo","categories","category","observable","observableArray","curMarker","inputText","frsqr","errorMsg","drawerOpen","showModal","show","rating","opening_hours","photo","height","attributions","html_attributions","detailsIcon","frSqrInfo","extract","fullurl","info","mapping","fromJS","frSqrTips","address","formatted_address","phone","formatted_phone_number","website","reviews","Reviews","arr","review","author","author_name","authorUrl","author_url","time","clearErrors","setCurrentPlace","getAnimation","toggleBounce","toggleDetails","clickContactInfo","placeFilter","toggleDrawer","findPlaceByName","matches","setMap","resetFilter","setContent","setAnimation","BOUNCE","setModal","awesomplete"],"mappings":"CAOA,WAqQA,QAAAA,GAAAC,EAAAC,EAAAC,GACA,IAAA,GAAAC,KAAAF,GAAA,CACA,GAAAG,GAAAH,EAAAE,GACAE,EAAAL,EAAAM,MAAAC,aAAA,QAAAJ,EAAAK,cAEA,iBAAAJ,GACAJ,EAAAG,GAAAM,SAAAJ,GAEAD,KAAA,EACAJ,EAAAG,GAAA,OAAAE,EAEAD,YAAAM,UACAV,EAAAG,GAAA,KAGAH,EAAAG,GAAAE,EAGAL,EAAAG,IAAA,IAAAH,EAAAG,KACAH,EAAAG,GAAAA,IAAAD,GAAAA,EAAAC,GAAAC,IASA,QAAAO,GAAAC,EAAAC,GACA,MAAA,gBAAAD,IAAAC,GAAAC,UAAAC,cAAAH,GAAAA,GAAA,KAGA,QAAAI,GAAAJ,EAAAC,GACA,MAAAI,GAAAC,MAAAL,GAAAC,UAAAK,iBAAAP,IAgEA,QAAAQ,KACAJ,EAAA,qBAAAK,QAAA,SAAAf,GACA,GAAAgB,GAAAhB,KAtWA,GAAAgB,GAAA,SAAAhB,EAAAJ,GACA,GAAAqB,GAAAC,IAGAA,MAAAlB,MAAAK,EAAAL,GACAkB,KAAAlB,MAAAmB,aAAA,eAAA,OACAD,KAAAlB,MAAAmB,aAAA,oBAAA,QAEAvB,EAAAA,MAEAH,EAAAyB,MACAE,SAAA,EACAC,SAAA,GACAC,WAAA,EACAC,OAAAP,EAAAQ,gBACAC,KAAAT,EAAAU,cACAC,KAAAX,EAAAY,KACAC,QAAAb,EAAAc,SACAlC,GAEAsB,KAAAa,MAAA,GAIAb,KAAAc,UAAA3B,EAAA4B,OAAA,OACAC,UAAA,cACAC,OAAAnC,IAGAkB,KAAAkB,GAAA/B,EAAA4B,OAAA,MACAI,OAAA,SACAC,OAAApB,KAAAc,YAGAd,KAAAqB,OAAAlC,EAAA4B,OAAA,QACAC,UAAA,kBACAM,KAAA,SACAC,YAAA,YACAC,gBAAA,YACAJ,OAAApB,KAAAc,YAKA3B,EAAAsC,KAAAzB,KAAAlB,OACAA,MAAAkB,KAAA0B,SAAAD,KAAAzB,MACA2B,KAAA3B,KAAA4B,MAAAH,KAAAzB,MACA6B,QAAA,SAAAC,GACA,GAAAC,GAAAD,EAAAE,OAIAjC,GAAAkC,SACA,KAAAF,GAAAhC,EAAAmC,UACAJ,EAAAK,iBACApC,EAAAqC,UAEA,KAAAL,EACAhC,EAAA6B,SAEA,KAAAG,GAAA,KAAAA,KACAD,EAAAK,iBACApC,EAAA,KAAAgC,EAAA,WAAA,eAMA5C,EAAAsC,KAAAzB,KAAAlB,MAAAuD,MAAAC,OAAAtC,KAAA4B,MAAAH,KAAAzB,QAEAb,EAAAsC,KAAAzB,KAAAkB,IAAAqB,UAAA,SAAAT,GACA,GAAAU,GAAAV,EAAAW,MAEA,IAAAD,IAAAxC,KAAA,CAEA,KAAAwC,IAAA,MAAAE,KAAAF,EAAAG,WACAH,EAAAA,EAAAI,UAGAJ,IAAA,IAAAV,EAAAe,SACAf,EAAAK,iBACApC,EAAAqC,OAAAI,EAAAV,EAAAW,aAKAzC,KAAAlB,MAAAgE,aAAA,SACA9C,KAAA+C,KAAA,IAAA/C,KAAAlB,MAAAC,aAAA,QACAiB,KAAAlB,MAAAkE,gBAAA,SAGAhD,KAAA+C,KAAA/C,KAAAlB,MAAAC,aAAA,cAAAL,EAAAqE,SAGAjD,EAAAmD,IAAAC,KAAAlD,MAGAF,GAAAqD,WACAJ,GAAAA,MAAAA,GACAK,MAAAC,QAAAN,GACA/C,KAAAsD,MAAAP,EAEA,gBAAAA,IAAAA,EAAAQ,QAAA,KAAA,GACAvD,KAAAsD,MAAAP,EAAAS,MAAA,YAGAT,EAAA5D,EAAA4D,GAEAA,GAAAA,EAAAU,WACAzD,KAAAsD,MAAA7D,EAAAiE,MAAAX,EAAAU,UAAAE,IAAA,SAAAC,GACA,MAAAA,GAAAC,YAAAC,WAKAxE,SAAAyE,gBAAA/D,KAAAlB,OACAkB,KAAA0B,YAIAQ,GAAAA,YACA,MAAAlC,MAAAa,MAAA,IAGAoB,GAAAA,UACA,OAAAjC,KAAAkB,GAAA4B,aAAA,WAGAlB,MAAA,WACA5B,KAAAkB,GAAAjB,aAAA,SAAA,IACAD,KAAAa,MAAA,GAEA1B,EAAA6E,KAAAhE,KAAAlB,MAAA,sBAGAmF,KAAA,WACAjE,KAAAkB,GAAA8B,gBAAA,UAEAhD,KAAAI,WAAA,KAAAJ,KAAAa,OACAb,KAAAA,QAAA,GAGAb,EAAA6E,KAAAhE,KAAAlB,MAAA,qBAGAoF,KAAA,WACA,GAAAC,GAAAnE,KAAAkB,GAAAuC,SAAAW,MAEApE,MAAAA,QAAAA,KAAAa,MAAAsD,EAAA,EAAAnE,KAAAa,MAAA,EAAA,KAGAwD,SAAA,WACA,GAAAF,GAAAnE,KAAAkB,GAAAuC,SAAAW,MAEApE,MAAAA,QAAAA,KAAAkC,SAAAlC,KAAAa,MAAA,EAAAsD,EAAA,IAIAG,OAAA,SAAA3F,GACA,GAAA4F,GAAAvE,KAAAkB,GAAAuC,QAEAzD,MAAAkC,UACAqC,EAAAvE,KAAAa,OAAAZ,aAAA,gBAAA,SAGAD,KAAAa,MAAAlC,EAEAA,EAAA,IAAA4F,EAAAH,OAAA,IACAG,EAAA5F,GAAAsB,aAAA,gBAAA,QACAD,KAAAqB,OAAAwC,YAAAU,EAAA5F,GAAAkF,aAGA1E,EAAA6E,KAAAhE,KAAAlB,MAAA,0BAGAsD,OAAA,SAAAF,EAAAsC,GAGA,GAFAtC,EAAAA,GAAAlC,KAAAkB,GAAAuC,SAAAzD,KAAAa,OAEA,CACA,GAAA4D,GAAAtF,EAAA6E,KAAAhE,KAAAlB,MAAA,sBACA4F,KAAAxC,EAAA2B,YACAc,KAAA3E,KAAA4E,YAAAzF,EAAA0F,aAAA3C,IACAsC,OAAAA,GAAAtC,GAGAuC,KACAzE,KAAAW,QAAAuB,EAAA2B,aACA7D,KAAA4B,QACAzC,EAAA6E,KAAAhE,KAAAlB,MAAA,iCAKA4C,SAAA,WACA,GAAA3B,GAAAC,KACA8E,EAAA9E,KAAAlB,MAAAgG,KAEAA,GAAAV,QAAApE,KAAAE,UAAAF,KAAAsD,MAAAc,OAAA,GACApE,KAAAa,MAAA,GAEAb,KAAAkB,GAAA6D,UAAA,GAEA/E,KAAA4E,YAAA5E,KAAAsD,MACAjD,OAAA,SAAAI,GACA,MAAAV,GAAAM,OAAAI,EAAAqE,KAEAvE,KAAAP,KAAAO,MACAd,MAAA,EAAAO,KAAAG,UAEAH,KAAA4E,YAAA/E,QAAA,SAAA6E,GACA3E,EAAAmB,GAAA8D,YAAAjF,EAAAU,KAAAiE,EAAAI,MAGA,IAAA9E,KAAAkB,GAAAuC,SAAAW,OACApE,KAAA4B,QAEA5B,KAAAiE,QAIAjE,KAAA4B,UAOA9B,EAAAmD,OAEAnD,EAAAQ,gBAAA,SAAAoE,EAAA5F,GACA,MAAAmG,QAAA9F,EAAA+F,aAAApG,EAAAgF,QAAA,KAAApB,KAAAgC,IAGA5E,EAAAqF,kBAAA,SAAAT,EAAA5F,GACA,MAAAmG,QAAA,IAAA9F,EAAA+F,aAAApG,EAAAgF,QAAA,KAAApB,KAAAgC,IAGA5E,EAAAU,cAAA,SAAA4E,EAAAC,GACA,MAAAD,GAAAhB,SAAAiB,EAAAjB,OACAgB,EAAAhB,OAAAiB,EAAAjB,OAGAiB,EAAAD,EAAA,GAAA,GAGAtF,EAAAY,KAAA,SAAAgE,EAAA5F,GACA,GAAAwG,GAAA,KAAAxG,EAAA4F,EAAAA,EAAA/D,QAAAsE,OAAA9F,EAAA+F,aAAApG,EAAAgF,QAAA,MAAA,kBACA,OAAA3E,GAAA4B,OAAA,MACAgE,UAAAO,EACAC,gBAAA,WAIAzF,EAAAc,QAAA,SAAA8D,GACA1E,KAAAlB,MAAAgG,MAAAJ,EA+BA,IAAAjF,GAAA2D,MAAAD,UAAA1D,KAsGA,OA5FAN,GAAA4B,OAAA,SAAAyE,EAAA9G,GACA,GAAA+G,GAAAnG,SAAAoG,cAAAF,EAEA,KAAA,GAAA7G,KAAAD,GAAA,CACA,GAAAiH,GAAAjH,EAAAC,EAEA,IAAA,WAAAA,EACAQ,EAAAwG,GAAAX,YAAAS,OAEA,IAAA,WAAA9G,EAAA,CACA,GAAAiH,GAAAzG,EAAAwG,EACAC,GAAAhD,WAAAiD,aAAAJ,EAAAG,GACAH,EAAAT,YAAAY,OAEAjH,KAAA8G,GACAA,EAAA9G,GAAAgH,EAGAF,EAAAxF,aAAAtB,EAAAgH,GAIA,MAAAF,IAGAtG,EAAAsC,KAAA,SAAAgE,EAAA/G,GACA,GAAA+G,EACA,IAAA,GAAAK,KAAApH,GAAA,CACA,GAAAqH,GAAArH,EAAAoH,EAEAA,GAAAtC,MAAA,OAAA3D,QAAA,SAAAiG,GACAL,EAAAO,iBAAAF,EAAAC,OAMA5G,EAAA6E,KAAA,SAAAvB,EAAAwD,EAAAxH,GACA,GAAAqD,GAAAxC,SAAA4G,YAAA,aAEApE,GAAAqE,UAAAF,GAAA,GAAA,EAEA,KAAA,GAAAG,KAAA3H,GACAqD,EAAAsE,GAAA3H,EAAA2H,EAGA,OAAA3D,GAAA4D,cAAAvE,IAGA3C,EAAA+F,aAAA,SAAAoB,GACA,MAAAA,GAAA3F,QAAA,uBAAA,SAGAxB,EAAA0F,aAAA,SAAAjB,GAEA,IAAA,GAAAjF,GAAA,EAAAiF,EAAAA,EAAA2C,uBAAA5H,KACA,MAAAA,IAYA,mBAAA6H,YAEA,YAAAlH,SAAAmH,WACA7G,IAIAN,SAAA0G,iBAAA,mBAAApG,IAIAE,EAAAX,EAAAA,EACAW,EAAAN,GAAAA,EAGA,mBAAAkH,QACAA,KAAAC,YAAA7G,GAIA,gBAAA8G,SAAAA,OAAAC,UACAD,OAAAC,QAAA/G,GAGAA;;;;;;;;;;;;;;;;;;ACtXA,WACA,YAMA,IAAAgH,GAAAC,QAAA,cAAAC,OAAAC,SAAAC,UAEA,UAAAF,OAAAC,SAAAC,UAEAF,OAAAC,SAAAC,SAAAC,MACA,0DAIA,kBAAAC,aACA,WAAAJ,OAAAC,SAAAI,UAAAP,IACAM,UAAAE,cAAAC,SAAA,qBACAC,KAAA,SAAAC,GAIA,kBAAAA,GAAAC,QACAD,EAAAC,SAIAD,EAAAE,cAAA,WAKA,GAAAP,UAAAE,cAAAM,WAAA,CAGA,GAAAC,GAAAJ,EAAAK,UAEAD,GAAAE,cAAA,WACA,OAAAF,EAAAG,OACA,IAAA,YAKA,KAEA,KAAA,YACA,KAAA,IAAAC,OAAA,yDA9BAb,SAuCA,SAAAc,GACAC,QAAAC,MAAA,4CAAAF,OAMA,IAAAG,KAAAA,OCrFAA,KAAA1E,IAAA0E,IAAA1E,QAEA,WACA0E,IAAA1E,KAEA/D,KAAA,WACA,GAAA0I,IAAAC,IAAA,UAAAC,IAAA,YACA5E,EAAAtE,SAAAmJ,eAAA,gBAEAzI,MAAA2D,IAAA,GAAA+E,QAAAC,KAAAC,IAAAhF,GACAiF,OAAAP,EACAQ,KAAA,GACAC,QAAA,GACAC,QAAA,GACAC,gBAAA,IAEAjJ,KAAAkJ,UAAA,GAAAR,QAAAC,KAAAQ,OAAAC,cAAAf,IAAA1E,IAAAA,KACA3D,KAAAqJ,WAAA,GAAAX,QAAAC,KAAAW,YACAC,SAAA,GAAApK,EAAA6H,QAAAwC,UAIAd,OAAAC,KAAA7C,MAAA2D,YAAAzJ,KAAAqJ,WAAA,aAAA,WACAhB,IAAAqB,UAAAL,YAAA,KAIAM,WAAA,WACAtB,IAAAqB,UAAAE,SAAA,mFACA,KAEAlB,OAAAC,KAAA7C,MAAA+D,gBACA7J,KAAA2D,IAAA,iBAAA3D,KAAA8J,YAIAC,aAAA,SAAAZ,GACAA,EAAAtJ,QAAA,SAAAmK,EAAAC,GACA,GAAAC,GAAA,GAAA7B,KAAAqB,UAAAS,MAAAH,EAEA3B,KAAAqB,UAAAP,OAAAjG,KAAAgH,GACA7B,IAAAqB,UAAAU,UAAAlH,KAAAgH,EAAAG,QACA,IAAAJ,GACA5B,IAAAqB,UAAAY,SAAAJ,KAGA7B,IAAAqB,UAAAa,gBAIAC,YAAA,SAAArB,GACAsB,aAAAC,QAAA,SAAAC,KAAAC,UAAAzB,KAGA0B,eAAA,WACA,GAAA1B,GAAAwB,KAAAG,MAAAL,aAAAtB,OAYA,OAXAA,GAAAtJ,QAAA,SAAAmK,GACA,GAAAzB,GAAAyB,EAAAe,SAAA9D,SAAAsB,IACAC,EAAAwB,EAAAe,SAAA9D,SAAAuB,GAEAwB,GAAAe,SAAA9D,SAAAsB,IAAA,WACA,MAAAA,IAEAyB,EAAAe,SAAA9D,SAAAuB,IAAA,WACA,MAAAA,MAGAW,GAIAW,UAAA,WACA,GAAAW,aAAAtB,QAAAd,IAAA1E,IAAAqH,kBACA7C,QAAA8C,IAAA,gCACA5C,IAAA1E,IAAAoG,aAAA1B,IAAA1E,IAAAkH,kBACAK,GAAAC,cAAA9C,IAAAqB,eACA,CACAe,aAAAC,QAAA,SAAAC,KAAAC,UAAAvC,IAAA1E,IAAAA,IAAAyH,aAEA,IAAAC,IACAC,OAAAjD,IAAA1E,IAAAA,IAAAyH,YACAG,OAAA,cAAA,SAAA,QAIAlD,KAAA1E,IAAAuF,UAAAsC,aAAAH,EAAA,SAAAI,EAAApK,GAEA,GADA8G,QAAA8C,IAAA,sBACA,OAAA5J,EACAgH,IAAA1E,IAAA+H,aAAAD,GACApD,IAAA1E,IAAA6G,YAAAiB,GACApD,IAAA1E,IAAAoG,aAAA0B,OACA,CACAtD,QAAA8C,IAAA,yBACA,IAAAU,GAAA,wBAAAtK,CACAgH,KAAAqB,UAAAkC,SAAAD,GAEAT,GAAAC,cAAA9C,IAAAqB,eAKAsB,gBAAA,WACA,GAAAa,GAAAlB,KAAAG,MAAAL,aAAAa,OACA,OAAAjD,KAAA1E,IAAAA,IAAAyH,YAAAU,OAAAD,IAGAH,aAAA,SAAAvC,GACAA,EAAAtJ,QAAA,SAAAmK,GACA,GAAAA,EAAA+B,OAAA,CACA,GAAAC,GAAAhC,EAAA+B,OAAA,GAAAE,QAAA1C,SAAA,IACA2C,UAAA,KACAlC,GAAA+B,OAAA,GAAAC,IAAAA,MAKAG,gBAAA,SAAAnC,GACA,GAAAqB,IACAe,QAAApC,EAAArF,KAAA0H,SAGAhE,KAAA1E,IAAAuF,UAAAoD,WAAAjB,EAAA,SAAAkB,EAAAlL,GACA,GAAA,OAAAA,EAAA,CACA,GAAAmL,GAAA,GAAAnE,KAAAqB,UAAA+C,aAAAF,EACAvC,GAAAuC,QAAAC,OACA,CACA,GAAAb,GAAA,8CAAAtK,CACAgH,KAAAqB,UAAAkC,SAAAD,OAKAe,aAAA,SAAA1C,GAEA,GAAA2C,GAAA3C,EAAArF,KAAAoG,SAAA9D,SAEA2F,GACAZ,IAAAhC,EAAArF,KAAAkI,KACAC,WAAA,GAAApE,QAAAC,KAAAoE,KAAA,GAAA,KAGAC,EAAA,GAAAtE,QAAAC,KAAAsE,QACAC,UAAAxE,OAAAC,KAAAwE,UAAAC,KACAC,aAAAC,OAAA,wCACAT,KAAAD,EACAjJ,IAAA0E,IAAA1E,IAAAA,IACAqG,OACA/C,UAAAsB,IAAAoE,EAAApE,MAAAC,IAAAmE,EAAAnE,OACA4D,QAAApC,EAAArF,KAAA0H,UAEAkB,MAAAvD,EAAArF,KAAA0F,MAMA,OAHA3B,QAAAC,KAAA7C,MAAA2D,YAAAuD,EAAA,QAAA,WACA3E,IAAAqB,UAAA8D,aAAAxD,KAEAgD,OC5JA3E,IAAAoF,WAAApF,IAAAoF,eAEA,WAEA,GAAAC,GAAA,mDACAC,EAAA,kDAEAtF,KAAAoF,YACAG,QAAA,wCACAC,QAAA,WAEAC,UAAA,SAAA9D,GACA,GAAA+D,GAAA/D,EAAArF,KAAAoG,SAAA9D,QAEA+G,QAAAC,MACAjC,IAAAhM,KAAA4N,QAAA,SACAjJ,MACAuJ,MAAAlE,EAAAK,OACA8D,GAAAJ,EAAAxF,MAAA,IAAAwF,EAAAvF,MAEA4F,UAAAV,EACAW,cAAAV,EACAW,EAAAtO,KAAA6N,QACAU,MAAA,KAEAC,SAAA,SAEAC,KAAA,SAAA9J,GAEA,GAAA+J,GAAA/J,EAAAgK,SAAAC,OAAA,EAGAvG,KAAAoF,WAAAoB,QAAAH,EAAA1E,KACA8E,KAAA,SAAAnK,GACA,GAAAgH,GAAA,qBAAAhH,EAAAoK,UACA1G,KAAAqB,UAAAkC,SAAAD,MAIAkD,QAAA,SAAAH,EAAA1E,GACAgE,OAAAC,MACAjC,IAAAhM,KAAA4N,QAAAc,EAAAM,GAAA,QACArK,MAEAyJ,UAAAV,EACAW,cAAAV,EACAW,EAAAtO,KAAA6N,SAEAW,SAAA,SACAC,KAAA,SAAA9J,GACA,GAAAsK,GAAAtK,EAAAgK,SAAAM,IAEA5G,KAAAqB,UAAAwF,WAAAR,EAAAO,EAAAjF,GACA3B,IAAAqB,UAAAyF,cAAAnF,KACA8E,KAAA,SAAAnK,GACA,GAAAgH,GAAA,0BAAAhH,EAAAoK,UACA1G,KAAAqB,UAAAkC,SAAAD,UCxDAtD,IAAA+G,KAAA/G,IAAA+G,SAEA,WACA/G,IAAA+G,MACAC,QAAA,SAAArF,GACAgE,OAAAC,MACAjC,IAAA,qCACArH,MACA2K,OAAA,QACAC,KAAA,2BACAC,QAAA,GACAC,QAAA,IACAC,OAAA,MACAC,OAAA,OACAC,UAAA,GACAC,cAAA,GACAC,OAAA9F,EAAAK,QAEAmE,SAAA,QACAuB,SAAAC,iBAAA,4BAEAvB,KAAA,SAAA9J,GACA,GAAAsL,GAAAC,OAAAC,KAAAxL,EAAAuJ,MAAAkC,OAAA,GACAC,EAAA,GAAAhI,KAAAqB,UAAA4G,SAAA3L,EAAAuJ,MAAAkC,MAAAH,GAGAM,UAAAF,EAAAG,WACAnI,IAAA+G,KAAAqB,aAAA9L,EAAAsL,KACAjG,EAAA0G,SAAAL,GACAhI,IAAAqB,UAAAyF,cAAAnF,MAEA8E,KAAA,SAAAnK,GACA,GAAAgH,GAAA,oBAAAhH,EAAAoK,UACA1G,KAAAqB,UAAAkC,SAAAD,MAKA8E,aAAA,SAAA9L,EAAAqK,GACA,GAAA2B,GAAAhM,EAAAuJ,MAAAkC,MAAApB,GAAA2B,UAEA,KAAA,GAAAC,KAAAD,GACA,MACA,8CADAA,EAAAC,GAAArD,OAEA,GAEA,OC7CAlF,IAAAqB,UAAArB,IAAAqB,cAEArB,IAAAqB,WACAE,SAAAsB,GAAA2F,aACA1H,OAAA+B,GAAA4F,kBACA1G,aACA2G,UAAA,KACAzG,SAAAY,GAAA2F,aACAG,UAAA9F,GAAA2F,WAAA,IACAI,MAAA,KACAC,SAAAhG,GAAA4F,oBACAzH,WAAA6B,GAAA2F,YAAA,GACAM,WAAAjG,GAAA2F,YAAA,GACAO,UAAAlG,GAAA2F,YAAA,GAKA1G,MAAA,SAAAH,GACAhK,KAAAqR,KAAAnG,GAAA2F,YAAA,GAGA7Q,KAAAqK,KAAAa,GAAA2F,WAAA7G,EAAAK,MACArK,KAAAsR,OAAApG,GAAA2F,WAAA7G,EAAAsH,QACAtR,KAAAiE,KAAAiH,GAAA2F,WACA7G,EAAAuH,cAAA,WAAA,UAEAvH,EAAA+B,OACA/L,KAAAwR,MAAAtG,GAAA2F,YACA7E,IAAAd,GAAA2F,WAAA7G,EAAA+B,OAAA,GAAAC,KACAyF,OAAAvG,GAAA2F,WAAA7G,EAAA+B,OAAA,GAAA0F,QACAjI,MAAA0B,GAAA2F,WAAA7G,EAAA+B,OAAA,GAAAvC,OACAkI,aAAAxG,GAAA2F,WAAA7G,EAAA+B,OAAA,GAAA4F,yBAGA3R,KAAAwR,MAAAtG,GAAA2F,WAAA,QAEA7Q,KAAA2E,KAAAqF,EACAhK,KAAA4R,YAAA1G,GAAA2F,WAAA,2BAGA7Q,KAAAuM,QAAArB,GAAA2F,aACA7Q,KAAAgN,OAAA3E,IAAA1E,IAAA+I,aAAA1M,MACAA,KAAA0Q,SAAAxF,GAAA2F,aACA7Q,KAAA6R,UAAA3G,GAAA2F,cAGAP,SAAA,SAAAD,GACArQ,KAAAwQ,QAAAtF,GAAA2F,WAAAR,EAAAyB,SACA9R,KAAAgM,IAAAd,GAAA2F,WAAAR,EAAA0B,UAGA7C,WAAA,SAAA8C,EAAA/C,EAAAjF,GAEA,GAAA6H,GAAA3G,GAAA+G,QAAAC,OAAAF,MACAG,EAAAjH,GAAA+G,QAAAC,OAAAjD,KAEA4C,GAAA5C,KAAAkD,EAEAnI,EAAA6H,UAAAA,IAGApF,aAAA,SAAAF,GACAvM,KAAAqR,KAAAnG,GAAA2F,YAAA,GACA7Q,KAAAoS,QAAAlH,GAAA2F,WAAAtE,EAAA8F,mBACArS,KAAAsS,MAAApH,GAAA2F,WAAAtE,EAAAgG,wBACAvS,KAAA+L,OAAAb,GAAA4F,gBAAAvE,EAAAR,QACA/L,KAAAsR,OAAApG,GAAA2F,WAAAtE,EAAA+E,QACAtR,KAAAwS,QAAAtH,GAAA2F,WAAAtE,EAAAiG,SACAxS,KAAAyS,QAAAvH,GAAA4F,gBACA,GAAAzI,KAAAqB,UAAAgJ,QAAAnG,EAAAkG,WAIAC,QAAA,SAAAD,GACA,GAAAE,KASA,OARAF,GAAA5S,QAAA,SAAA+S,GACAD,EAAAzP,MACA2P,OAAA3H,GAAA2F,WAAA+B,EAAAE,aACAC,UAAA7H,GAAA2F,WAAA+B,EAAAI,YACAtO,KAAAwG,GAAA2F,WAAA+B,EAAAlO,MACAuO,KAAA/H,GAAA2F,WAAA+B,EAAAK,UAGAN,GAMA/G,SAAA,SAAAD,GACA3L,KAAAkR,SAAAlR,KAAAkR,UAAAhG,GAAA4F,oBACA9Q,KAAAkR,SAAAhO,KAAAyI,GACAhC,WAAA,WACAtB,IAAAqB,UAAAwJ,eACA,MAGAA,YAAA,WACAlT,KAAAkR,cAGAiC,gBAAA,SAAAnJ,GACA3B,IAAAqB,UAAAY,WAAA0C,OAAAoG,gBACA/K,IAAAqB,UAAA2J,eAEAhL,IAAAqB,UAAAY,SAAAN,IAGAsJ,cAAA,SAAAtJ,GACAuG,SAAAvG,EAAAuC,WAAAvC,EAAAuC,UAAA8E,UAAA,GACArH,EAAAuC,UAAA8E,MAAA,GACArH,EAAA4H,YAAA,6BAEAvJ,IAAA1E,IAAAwI,gBAAAnC,GACA3B,IAAAqB,UAAAyJ,gBAAAnJ,GACAA,EAAA4H,YAAA,+BAIA2B,iBAAA,WACAvT,KAAAgR,UAAAhR,KAAAsK,WAAAD,QACAhC,IAAAqB,UAAA8J,cACAxT,KAAAsT,cAAAjL,IAAAqB,UAAAY,YACAjC,IAAA1E,IAAA0F,WAAAzH,QACAyG,IAAAqB,UAAAL,YAAA,GACArJ,KAAAyT,gBAIAjG,aAAA,SAAAxD,GACA,GAAAE,GAAAF,GAAAhK,IAGAqI,KAAA+G,KAAAC,QAAAnF,GACA7B,IAAAoF,WAAAK,UAAA5D,GAGA7B,IAAA1E,IAAA0F,WAAAzH,QACAyG,IAAAqB,UAAAyH,cACA9I,IAAAqB,UAAA+J,eAEApL,IAAAqB,UAAAyJ,gBAAAjJ,GACA7B,IAAAqB,UAAA2J,gBAGAK,gBAAA,SAAArJ,GAEA,IAAA,GADAlB,GAAAd,IAAAqB,UAAAP,SACAxK,EAAAwK,EAAA/E,OAAA,EAAAzF,GAAA,EAAAA,IACA,GAAAwK,EAAAxK,GAAA0L,SAAAA,EACA,MAAAlB,GAAAxK,EAGA,QAAA,GAGA6U,YAAA,WACA,GAAA9M,GAAA1G,IAEA,IAAA0G,EAAAsK,YAAA,CACA,GAAA2C,GAAAjN,EAAAyC,SAAA9I,OAAA,SAAA2J,GACA,GAAAK,GAAAL,EAAAK,OAAArL,cACAF,EAAA4H,EAAAsK,YAAAhS,aACA,OAAAqL,GAAA9G,QAAAzE,IAAA,GAIA4H,GAAAyC,SAAAtJ,QAAA,SAAAmK,GACAA,EAAAgD,OAAA4G,OAAA,MACA5J,EAAAqH,MAAA,KAIAsC,EAAA9T,QAAA,SAAAmK,GACAA,EAAAgD,OAAA4G,OAAAvL,IAAA1E,IAAAA,KACAqG,EAAAqH,MAAA,SAIA3K,GAAAyC,SAAAtJ,QAAA,SAAAmK,GACAA,EAAAgD,OAAA4G,OAAAvL,IAAA1E,IAAAA,KACAqG,EAAAqH,MAAA,IAIA,QAAA,GAGAwC,YAAA,WACAxL,IAAAqB,UAAAsH,UAAA,IACA3I,IAAAqB,UAAA8J,aAGA,KAAA,GADArK,GAAAnJ,KAAAmJ,SACAxK,EAAAwK,EAAA/E,OAAA,EAAAzF,GAAA,EAAAA,IACAwK,EAAAxK,GAAA4N,WAAApD,EAAAxK,GAAA4N,UAAA8E,SACAlI,EAAAxK,GAAA4N,UAAA8E,MAAA,GACAlI,EAAAxK,GAAAiT,YAAA,6BAKAzC,cAAA,SAAAnF,GACA,GAAAwG,GAAArR,EAAA,eAAAmG,MAEA+C,KAAA1E,IAAA0F,WAAAyK,WAAAtD,GACAnI,IAAA1E,IAAA0F,WAAApF,KAAAoE,IAAA1E,IAAAA,IAAAqG,EAAAgD,QAEA3E,IAAAqB,UAAAL,YAAA,IAGAgK,aAAA,WACA,GAAAhL,IAAAqB,UAAAY,WAAA0C,OAAAoG,eACA/K,IAAAqB,UAAAY,WAAA0C,OAAA+G,aAAA,UACA,CACA,GAAA/G,GAAA3E,IAAAqB,UAAAY,WAAA0C,MACAA,GAAA+G,aAAArL,OAAAC,KAAAwE,UAAA6G,UAIAP,aAAA,WACApL,IAAAqB,UAAAyH,YAAA9I,IAAAqB,UAAAyH,eAGA8C,SAAA,WACA5L,IAAAqB,UAAA0H,WAAA/I,IAAAqB,UAAA0H,cAGA7G,aAAA,WACA,GAAAzL,GAAAQ,SAAAmJ,eAAA,eACAyL,EAAA,GAAAvN,aAAA7H,EACAoV,GAAAnR,KAAAsF,IAAAqB,UAAAU,UAEAtL,EAAAkH,iBAAA,6BAAA,WACA,GAAAgE,GAAA3B,IAAAqB,UAAAgK,gBAAA1T,KAAA8E,MACAqD,SAAA8C,IAAAjB,GACA3B,IAAAqB,UAAAyJ,gBAAAnJ,GACA3B,IAAAqB,UAAA4J,cAAAtJ,GACA3B,IAAAqB,UAAAsH,UAAAhR,KAAA8E,OACAuD,IAAAqB,UAAA8J","file":"main.min.js","sourcesContent":["/**\n * Simple, lightweight, usable local autocomplete library for modern browsers\n * Because there weren’t enough autocomplete scripts in the world? Because I’m completely insane and have NIH syndrome? Probably both. :P\n * @author Lea Verou http://leaverou.github.io/awesomplete\n * MIT license\n */\n\n(function () {\n\nvar _ = function (input, o) {\n  var me = this;\n\n  // Setup\n  this.input = $(input);\n  this.input.setAttribute(\"autocomplete\", \"off\");\n  this.input.setAttribute(\"aria-autocomplete\", \"list\");\n\n  o = o || {};\n\n  configure(this, {\n    minChars: 1,\n    maxItems: 20,\n    autoFirst: false,\n    filter: _.FILTER_CONTAINS,\n    sort: _.SORT_BYLENGTH,\n    item: _.ITEM,\n    replace: _.REPLACE\n  }, o);\n\n  this.index = -1;\n\n  // Create necessary elements\n\n  this.container = $.create(\"div\", {\n    className: \"awesomplete\",\n    around: input\n  });\n\n  this.ul = $.create(\"ul\", {\n    hidden: \"hidden\",\n    inside: this.container\n  });\n\n  this.status = $.create(\"span\", {\n    className: \"visually-hidden\",\n    role: \"status\",\n    \"aria-live\": \"assertive\",\n    \"aria-relevant\": \"additions\",\n    inside: this.container\n  });\n\n  // Bind events\n\n  $.bind(this.input, {\n    \"input\": this.evaluate.bind(this),\n    \"blur\": this.close.bind(this),\n    \"keydown\": function(evt) {\n      var c = evt.keyCode;\n\n      // If the dropdown `ul` is in view, then act on keydown for the following keys:\n      // Enter / Esc / Up / Down\n      if(me.opened) {\n        if (c === 13 && me.selected) { // Enter\n          evt.preventDefault();\n          me.select();\n        }\n        else if (c === 27) { // Esc\n          me.close();\n        }\n        else if (c === 38 || c === 40) { // Down/Up arrow\n          evt.preventDefault();\n          me[c === 38? \"previous\" : \"next\"]();\n        }\n      }\n    }\n  });\n\n  $.bind(this.input.form, {\"submit\": this.close.bind(this)});\n\n  $.bind(this.ul, {\"mousedown\": function(evt) {\n    var li = evt.target;\n\n    if (li !== this) {\n\n      while (li && !/li/i.test(li.nodeName)) {\n        li = li.parentNode;\n      }\n\n      if (li && evt.button === 0) {  // Only select on left click\n        evt.preventDefault();\n        me.select(li, evt.target);\n      }\n    }\n  }});\n\n  if (this.input.hasAttribute(\"list\")) {\n    this.list = \"#\" + this.input.getAttribute(\"list\");\n    this.input.removeAttribute(\"list\");\n  }\n  else {\n    this.list = this.input.getAttribute(\"data-list\") || o.list || [];\n  }\n\n  _.all.push(this);\n};\n\n_.prototype = {\n  set list(list) {\n    if (Array.isArray(list)) {\n      this._list = list;\n    }\n    else if (typeof list === \"string\" && list.indexOf(\",\") > -1) {\n        this._list = list.split(/\\s*,\\s*/);\n    }\n    else { // Element or CSS selector\n      list = $(list);\n\n      if (list && list.children) {\n        this._list = slice.apply(list.children).map(function (el) {\n          return el.textContent.trim();\n        });\n      }\n    }\n\n    if (document.activeElement === this.input) {\n      this.evaluate();\n    }\n  },\n\n  get selected() {\n    return this.index > -1;\n  },\n\n  get opened() {\n    return !this.ul.hasAttribute(\"hidden\");\n  },\n\n  close: function () {\n    this.ul.setAttribute(\"hidden\", \"\");\n    this.index = -1;\n\n    $.fire(this.input, \"awesomplete-close\");\n  },\n\n  open: function () {\n    this.ul.removeAttribute(\"hidden\");\n\n    if (this.autoFirst && this.index === -1) {\n      this.goto(0);\n    }\n\n    $.fire(this.input, \"awesomplete-open\");\n  },\n\n  next: function () {\n    var count = this.ul.children.length;\n\n    this.goto(this.index < count - 1? this.index + 1 : -1);\n  },\n\n  previous: function () {\n    var count = this.ul.children.length;\n\n    this.goto(this.selected? this.index - 1 : count - 1);\n  },\n\n  // Should not be used, highlights specific item without any checks!\n  goto: function (i) {\n    var lis = this.ul.children;\n\n    if (this.selected) {\n      lis[this.index].setAttribute(\"aria-selected\", \"false\");\n    }\n\n    this.index = i;\n\n    if (i > -1 && lis.length > 0) {\n      lis[i].setAttribute(\"aria-selected\", \"true\");\n      this.status.textContent = lis[i].textContent;\n    }\n\n    $.fire(this.input, \"awesomplete-highlight\");\n  },\n\n  select: function (selected, origin) {\n    selected = selected || this.ul.children[this.index];\n\n    if (selected) {\n      var allowed = $.fire(this.input, \"awesomplete-select\", {\n        text: selected.textContent,\n        data: this.suggestions[$.siblingIndex(selected)],\n        origin: origin || selected\n      });\n\n      if (allowed) {\n        this.replace(selected.textContent);\n        this.close();\n        $.fire(this.input, \"awesomplete-selectcomplete\");\n      }\n    }\n  },\n\n  evaluate: function() {\n    var me = this;\n    var value = this.input.value;\n\n    if (value.length >= this.minChars && this._list.length > 0) {\n      this.index = -1;\n      // Populate list with options that match\n      this.ul.innerHTML = \"\";\n\n      this.suggestions = this._list\n        .filter(function(item) {\n          return me.filter(item, value);\n        })\n        .sort(this.sort)\n        .slice(0, this.maxItems);\n\n      this.suggestions.forEach(function(text) {\n          me.ul.appendChild(me.item(text, value));\n        });\n\n      if (this.ul.children.length === 0) {\n        this.close();\n      } else {\n        this.open();\n      }\n    }\n    else {\n      this.close();\n    }\n  }\n};\n\n// Static methods/properties\n\n_.all = [];\n\n_.FILTER_CONTAINS = function (text, input) {\n  return RegExp($.regExpEscape(input.trim()), \"i\").test(text);\n};\n\n_.FILTER_STARTSWITH = function (text, input) {\n  return RegExp(\"^\" + $.regExpEscape(input.trim()), \"i\").test(text);\n};\n\n_.SORT_BYLENGTH = function (a, b) {\n  if (a.length !== b.length) {\n    return a.length - b.length;\n  }\n\n  return a < b? -1 : 1;\n};\n\n_.ITEM = function (text, input) {\n  var html = input === '' ? text : text.replace(RegExp($.regExpEscape(input.trim()), \"gi\"), \"<mark>$&</mark>\");\n  return $.create(\"li\", {\n    innerHTML: html,\n    \"aria-selected\": \"false\"\n  });\n};\n\n_.REPLACE = function (text) {\n  this.input.value = text;\n};\n\n// Private functions\n\nfunction configure(instance, properties, o) {\n  for (var i in properties) {\n    var initial = properties[i],\n        attrValue = instance.input.getAttribute(\"data-\" + i.toLowerCase());\n\n    if (typeof initial === \"number\") {\n      instance[i] = parseInt(attrValue);\n    }\n    else if (initial === false) { // Boolean options must be false by default anyway\n      instance[i] = attrValue !== null;\n    }\n    else if (initial instanceof Function) {\n      instance[i] = null;\n    }\n    else {\n      instance[i] = attrValue;\n    }\n\n    if (!instance[i] && instance[i] !== 0) {\n      instance[i] = (i in o)? o[i] : initial;\n    }\n  }\n}\n\n// Helpers\n\nvar slice = Array.prototype.slice;\n\nfunction $(expr, con) {\n  return typeof expr === \"string\"? (con || document).querySelector(expr) : expr || null;\n}\n\nfunction $$(expr, con) {\n  return slice.call((con || document).querySelectorAll(expr));\n}\n\n$.create = function(tag, o) {\n  var element = document.createElement(tag);\n\n  for (var i in o) {\n    var val = o[i];\n\n    if (i === \"inside\") {\n      $(val).appendChild(element);\n    }\n    else if (i === \"around\") {\n      var ref = $(val);\n      ref.parentNode.insertBefore(element, ref);\n      element.appendChild(ref);\n    }\n    else if (i in element) {\n      element[i] = val;\n    }\n    else {\n      element.setAttribute(i, val);\n    }\n  }\n\n  return element;\n};\n\n$.bind = function(element, o) {\n  if (element) {\n    for (var event in o) {\n      var callback = o[event];\n\n      event.split(/\\s+/).forEach(function (event) {\n        element.addEventListener(event, callback);\n      });\n    }\n  }\n};\n\n$.fire = function(target, type, properties) {\n  var evt = document.createEvent(\"HTMLEvents\");\n\n  evt.initEvent(type, true, true );\n\n  for (var j in properties) {\n    evt[j] = properties[j];\n  }\n\n  return target.dispatchEvent(evt);\n};\n\n$.regExpEscape = function (s) {\n  return s.replace(/[-\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n};\n\n$.siblingIndex = function (el) {\n  /* eslint-disable no-cond-assign */\n  for (var i = 0; el = el.previousElementSibling; i++);\n  return i;\n};\n\n// Initialization\n\nfunction init() {\n  $$(\"input.awesomplete\").forEach(function (input) {\n    new _(input);\n  });\n}\n\n// Are we in a browser? Check for Document constructor\nif (typeof Document !== \"undefined\") {\n  // DOM already loaded?\n  if (document.readyState !== \"loading\") {\n    init();\n  }\n  else {\n    // Wait for it\n    document.addEventListener(\"DOMContentLoaded\", init);\n  }\n}\n\n_.$ = $;\n_.$$ = $$;\n\n// Make sure to export Awesomplete on self when in a browser\nif (typeof self !== \"undefined\") {\n  self.Awesomplete = _;\n}\n\n// Expose Awesomplete as a CJS module\nif (typeof module === \"object\" && module.exports) {\n  module.exports = _;\n}\n\nreturn _;\n\n}());\n//\n","/*!\n *\n *  Web Starter Kit\n *  Copyright 2015 Google Inc. All rights reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    https://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License\n *\n */\n/* eslint-env browser */\n\n/* I disabled the service worker */\n/* Uncomment everyting from here to get back to default */\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // Check to see if there's an updated version of service-worker.js with\n      // new files to cache:\n      // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-registration-update-method\n      if (typeof registration.update === 'function') {\n        registration.update();\n      }\n\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n})();\n\n/* global */\nvar app = app || {};\n","/* global app document google $ window ko localStorage */\napp.map = app.map || {};\n\n(function() {\n  app.map = {\n    // Callback function for Google Maps - Initialize the Map\n    init: function() {\n      var home = {lat: 39.927677, lng: -75.171909};\n      var el = document.getElementById('map-container');\n\n      this.map = new google.maps.Map(el, {\n        center: home,\n        zoom: 14,\n        minZoom: 12,\n        maxZoom: 18,\n        mapTypeControl: false\n      });\n      this.placesApi = new google.maps.places.PlacesService(app.map.map);\n      this.infoWindow = new google.maps.InfoWindow({\n        maxWidth: $(window).width() * 0.7}\n      );\n\n      // Show the drawer button when infowindow closes\n      google.maps.event.addListener(this.infoWindow, 'closeclick', function() {\n        app.viewmodel.infoWindow(false);\n      });\n\n      // Show error message - if maps can't be reached, will be visible\n      setTimeout(function() {\n        app.viewmodel.mapError('There appears to be a problem with Google Maps, please try refreshing the page');\n      }, 5000);\n      // Load places once the maps bounds are set\n      google.maps.event.addListenerOnce(\n        this.map, 'bounds_changed', this.getPlaces\n      );\n    },\n\n    createPlaces: function(places) {\n      places.forEach(function(place, idx) {\n        var plc = new app.viewmodel.Place(place);\n\n        app.viewmodel.places.push(plc);\n        app.viewmodel.placeList.push(plc.name());\n        if (idx === 1) {\n          app.viewmodel.curPlace(plc);\n        }\n      });\n      app.viewmodel.autocomplete();\n    },\n\n    // Likely against TOS, but figure it's fine for educational purposes\n    storePlaces: function(places) {\n      localStorage.setItem('places', JSON.stringify(places));\n    },\n\n    retrievePlaces: function() {\n      var places = JSON.parse(localStorage.places);\n      places.forEach(function(place) {\n        var lat = place.geometry.location.lat;\n        var lng = place.geometry.location.lng;\n        // Make lat/lng into functions to match API results\n        place.geometry.location.lat = function() {\n          return lat;\n        };\n        place.geometry.location.lng = function() {\n          return lng;\n        };\n      });\n      return places;\n    },\n\n    // Get a list of places from Google Maps\n    getPlaces: function() {\n      if (localStorage.places && app.map.sameBoundsCheck()) {\n        console.log('Creating places from storage');\n        app.map.createPlaces(app.map.retrievePlaces());\n        ko.applyBindings(app.viewmodel);\n      } else {\n        localStorage.setItem('bounds', JSON.stringify(app.map.map.getBounds()));\n        // Variables for the request\n        var request = {\n          bounds: app.map.map.getBounds(),\n          types: ['art_gallery', 'museum', 'park']\n        };\n\n        // Call the Places API\n        app.map.placesApi.nearbySearch(request, function(results, status) {\n          console.log('Calling Places API');\n          if (status === 'OK') {\n            app.map.setPhotoUrls(results);\n            app.map.storePlaces(results);\n            app.map.createPlaces(results);\n          } else {\n            console.log('We have a places error');\n            var msg = 'Google Places Error: ' + status;\n            app.viewmodel.addError(msg);\n          }\n          ko.applyBindings(app.viewmodel);\n        });\n      }\n    },\n\n    sameBoundsCheck: function() {\n      var oldBounds = JSON.parse(localStorage.bounds);\n      return app.map.map.getBounds().equals(oldBounds);\n    },\n\n    setPhotoUrls: function(places) {\n      places.forEach(function(place) {\n        if (place.photos) {\n          var url = place.photos[0].getUrl({maxWidth: 200,\n                                            maxHeight: 300});\n          place.photos[0].url = url;\n        }\n      });\n    },\n\n    getPlaceDetails: function(place) {\n      var request = {\n        placeId: place.data.place_id\n      };\n      // Call the Places API, add details to the place\n      app.map.placesApi.getDetails(request, function(details, status) {\n        if (status === 'OK') {\n          var deets = new app.viewmodel.PlaceDetails(details);\n          place.details(deets);\n        } else {\n          var msg = 'Google Places Error while getting details: ' + status;\n          app.viewmodel.addError(msg);\n        }\n      });\n    },\n\n    createMarker: function(place) {\n      // Location for the Marker\n      var plcloc = place.data.geometry.location;\n      // Set icon and icon size\n      var image = {\n        url: place.data.icon,\n        scaledSize: new google.maps.Size(50, 50)\n      };\n      // Create the marker\n      var marker = new google.maps.Marker({\n        animation: google.maps.Animation.DROP,\n        attribution: {source: 'mrkjesus2.github.io/Neighborhood-Map'},\n        icon: image,\n        map: app.map.map,\n        place: {\n          location: {lat: plcloc.lat(), lng: plcloc.lng()},\n          placeId: place.data.place_id\n        },\n        title: place.data.name\n      });\n\n      google.maps.event.addListener(marker, 'click', function() {\n        app.viewmodel.clickHandler(place);\n      });\n      return marker;\n    }\n  };\n})();\n","/* global app jQuery */\napp.foursquare = app.foursquare || {};\n\n(function() {\n  // TODO: Move this to a config file (keep out of git)\n  var CLIENTID = 'ZBGAM3NOJCK4P345ELK2JIB232FMDENJ05GXYQRSAHOHURJR';\n  var CLIENTSECRET = 'RGEF2DNONIR0AN2GHSIIMGZWLT0IH5JSJCJ5AGFAJ2WZDGLH';\n\n  app.foursquare = {\n    baseUrl: 'https://api.foursquare.com/v2/venues/',\n    version: '20140806',\n\n    findPlace: function(place) {\n      var loc = place.data.geometry.location;\n      // Call the foursquare API\n      jQuery.ajax({\n        url: this.baseUrl + 'search',\n        data: {\n          query: place.name(),\n          ll: loc.lat() + ',' + loc.lng(),\n          // Disabled lines due to API requirements\n          client_id: CLIENTID, // eslint-disable-line camelcase\n          client_secret: CLIENTSECRET, // eslint-disable-line camelcase\n          v: this.version,\n          limit: '1'\n        },\n        dataType: 'json'\n\n      }).done(function(data) {\n        // Best matching venue\n        var venue = data.response.venues[0];\n\n        // Call the API again for venue tips\n        app.foursquare.getTips(venue, place);\n      }).fail(function(data) {\n        var msg = 'Foursquare Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    },\n\n    getTips: function(venue, place) {\n      jQuery.ajax({\n        url: this.baseUrl + venue.id + '/tips',\n        data: {\n          // Disabled lines due to API requirements\n          client_id: CLIENTID, // eslint-disable-line camelcase\n          client_secret: CLIENTSECRET, // eslint-disable-line camelcase\n          v: this.version\n        },\n        dataType: 'json'\n      }).done(function(data) {\n        var tips = data.response.tips;\n        // Assign details to place\n        app.viewmodel.fourSquare(venue, tips, place);\n        app.viewmodel.setInfoWindow(place);\n      }).fail(function(data) {\n        var msg = 'Foursquare Tips Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    }\n  };\n})();\n","/* global app jQuery */\napp.wiki = app.wiki || {};\n\n(function() {\n  app.wiki = {\n    getWiki: function(place) {\n      jQuery.ajax({\n        url: 'https://en.wikipedia.org/w/api.php',\n        data: {\n          action: 'query',\n          prop: 'categories|extracts|info',\n          exintro: '',\n          exchars: 1000,\n          inprop: 'url',\n          format: 'json',\n          redirects: '',\n          converttitles: '',\n          titles: place.name()\n        },\n        dataType: 'jsonp',\n        headers: {'Api-User-Agent': 'Mark\\'s Udacity Project'}\n\n      }).done(function(data) {\n        var firstId = Object.keys(data.query.pages)['0'];\n        var page = new app.viewmodel.WikiPage(data.query.pages[firstId]);\n\n        // Check to make sure there is worthwhile content\n        if (page.content() !== undefined &&\n        !app.wiki.ambiguityChk(data, firstId)) {\n          place.wikiInfo(page);\n          app.viewmodel.setInfoWindow(place);\n        }\n      }).fail(function(data) {\n        var msg = 'Wikipedia Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    },\n\n    // Check for a disambiguity page(ie. no info - only links)\n    ambiguityChk: function(data, id) {\n      var categories = data.query.pages[id].categories;\n\n      for (var category in categories) {\n        if (categories[category].title ===\n          'Category:All article disambiguation pages') {\n          return true;\n        }\n        return false;\n      }\n    }\n  };\n})();\n","/* global app ko $ google document Awesomplete */\n\napp.viewmodel = app.viewmodel || {};\n\napp.viewmodel = {\n  mapError: ko.observable(),\n  places: ko.observableArray(),\n  placeList: [],\n  curMarker: null,\n  curPlace: ko.observable(),\n  inputText: ko.observable(''),\n  frsqr: null,\n  errorMsg: ko.observableArray([]),\n  infoWindow: ko.observable(false),\n  drawerOpen: ko.observable(false),\n  showModal: ko.observable(false),\n\n/* ************* */\n/* Constructors */\n/* ************ */\n  Place: function(place) {\n    this.show = ko.observable(true);\n\n    // Info returned from map.getPlaces\n    this.name = ko.observable(place.name);\n    this.rating = ko.observable(place.rating);\n    this.open = ko.observable(\n      place.opening_hours ? 'Open Now' : 'Closed' || 'Hours not available'\n    );\n    if (place.photos) {\n      this.photo = ko.observable({\n        url: ko.observable(place.photos[0].url),\n        height: ko.observable(place.photos[0].height),\n        width: ko.observable(place.photos[0].width),\n        attributions: ko.observable(place.photos[0].html_attributions)\n      } || {});\n    } else {\n      this.photo = ko.observable('none');\n    }\n    this.data = place;\n    this.detailsIcon = ko.observable('fa fa-chevron-circle-up');\n\n    // Info from elsewhere\n    this.details = ko.observable();\n    this.marker = app.map.createMarker(this);\n    this.wikiInfo = ko.observable();\n    this.frSqrInfo = ko.observable();\n  },\n\n  WikiPage: function(page) {\n    this.content = ko.observable(page.extract);\n    this.url = ko.observable(page.fullurl);\n  },\n\n  fourSquare: function(info, tips, place) {\n    // Map FourSquare responses to observables\n    var frSqrInfo = ko.mapping.fromJS(info, {});\n    var frSqrTips = ko.mapping.fromJS(tips, {});\n    // Create a child object for tips response\n    frSqrInfo.tips = frSqrTips;\n    // Assign the info to the place\n    place.frSqrInfo(frSqrInfo);\n  },\n\n  PlaceDetails: function(details) {\n    this.show = ko.observable(true);\n    this.address = ko.observable(details.formatted_address);\n    this.phone = ko.observable(details.formatted_phone_number);\n    this.photos = ko.observableArray(details.photos);\n    this.rating = ko.observable(details.rating);\n    this.website = ko.observable(details.website);\n    this.reviews = ko.observableArray(\n      new app.viewmodel.Reviews(details.reviews)\n    );\n  },\n\n  Reviews: function(reviews) {\n    var arr = [];\n    reviews.forEach(function(review) {\n      arr.push({\n        author: ko.observable(review.author_name),\n        authorUrl: ko.observable(review.author_url),\n        text: ko.observable(review.text),\n        time: ko.observable(review.time)\n      });\n    });\n    return arr;\n  },\n\n/* **************** */\n/* Helper Functions */\n/* **************** */\n  addError: function(msg) {\n    this.errorMsg = this.errorMsg || ko.observableArray([]);\n    this.errorMsg.push(msg);\n    setTimeout(function() {\n      app.viewmodel.clearErrors();\n    }, 2000);\n  },\n\n  clearErrors: function() {\n    this.errorMsg([]);\n  },\n\n  setCurrentPlace: function(place) {\n    if (app.viewmodel.curPlace().marker.getAnimation()) {\n      app.viewmodel.toggleBounce();\n    }\n    app.viewmodel.curPlace(place);\n  },\n\n  toggleDetails: function(place) {\n    if (place.details() !== undefined && place.details().show() === true) {\n      place.details().show(false);\n      place.detailsIcon('fa fa-chevron-circle-up');\n    } else {\n      app.map.getPlaceDetails(place);\n      app.viewmodel.setCurrentPlace(place);\n      place.detailsIcon('fa fa-chevron-circle-down');\n    }\n  },\n\n  clickContactInfo: function() {\n    this.inputText(this.curPlace().name());\n    app.viewmodel.placeFilter();\n    this.toggleDetails(app.viewmodel.curPlace());\n    app.map.infoWindow.close();\n    app.viewmodel.infoWindow(false);\n    this.toggleDrawer();\n  },\n\n  // Called when the marker or list item is clicked\n  clickHandler: function(place) {\n    var plc = place || this;\n\n    // Call for data\n    app.wiki.getWiki(plc);\n    app.foursquare.findPlace(plc);\n\n    // Handle map actions\n    app.map.infoWindow.close();\n    if (app.viewmodel.drawerOpen()) {\n      app.viewmodel.toggleDrawer();\n    }\n    app.viewmodel.setCurrentPlace(plc);\n    app.viewmodel.toggleBounce();\n  },\n\n  findPlaceByName: function(name) {\n    var places = app.viewmodel.places();\n    for (var i = places.length - 1; i >= 0; i--) {\n      if (places[i].name() === name) {\n        return places[i];\n      }\n    }\n    return false;\n  },\n\n  placeFilter: function() {\n    var self = this;\n\n    if (self.inputText()) {\n      var matches = self.places().filter(function(place) {\n        var name = place.name().toLowerCase();\n        var input = self.inputText().toLowerCase();\n        return name.indexOf(input) >= 0;\n      });\n\n      // Set markers and list items to hidden\n      self.places().forEach(function(place) {\n        place.marker.setMap(null);\n        place.show(false);\n      });\n\n      // Add remaining places to the map and list\n      matches.forEach(function(place) {\n        place.marker.setMap(app.map.map);\n        place.show(true);\n      });\n    } else {\n      // Set all place markers on the map\n      self.places().forEach(function(place) {\n        place.marker.setMap(app.map.map);\n        place.show(true);\n      });\n    }\n\n    return true;\n  },\n\n  resetFilter: function() {\n    app.viewmodel.inputText('');\n    app.viewmodel.placeFilter();\n    // Close details which are open\n    var places = this.places();\n    for (var i = places.length - 1; i >= 0; i--) {\n      if (places[i].details() && places[i].details().show()) {\n        places[i].details().show(false);\n        places[i].detailsIcon('fa fa-chevron-circle-up');\n      }\n    }\n  },\n\n  setInfoWindow: function(place) {\n    var content = $('#infowindow').html();\n\n    app.map.infoWindow.setContent(content);\n    app.map.infoWindow.open(app.map.map, place.marker);\n    // Hide the drawer button while infowindow is open\n    app.viewmodel.infoWindow(true);\n  },\n\n  toggleBounce: function() {\n    if (app.viewmodel.curPlace().marker.getAnimation()) {\n      app.viewmodel.curPlace().marker.setAnimation(null);\n    } else {\n      var marker = app.viewmodel.curPlace().marker;\n      marker.setAnimation(google.maps.Animation.BOUNCE);\n    }\n  },\n\n  toggleDrawer: function() {\n    app.viewmodel.drawerOpen(!app.viewmodel.drawerOpen());\n  },\n\n  setModal: function() {\n    app.viewmodel.showModal(!app.viewmodel.showModal());\n  },\n\n  autocomplete: function() {\n    var input = document.getElementById('place-input');\n    var awesomplete = new Awesomplete(input);\n    awesomplete.list = app.viewmodel.placeList;\n\n    input.addEventListener('awesomplete-selectcomplete', function() {\n      var place = app.viewmodel.findPlaceByName(this.value);\n      console.log(place);\n      app.viewmodel.setCurrentPlace(place);\n      app.viewmodel.toggleDetails(place);\n      app.viewmodel.inputText(this.value);\n      app.viewmodel.placeFilter();\n    });\n  }\n};\n\n"],"sourceRoot":"/source/"}
>>>>>>> dev
