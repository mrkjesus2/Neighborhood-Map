{"version":3,"sources":["foursquare.js"],"names":["app","foursquare","CLIENTID","CLIENTSECRET","baseUrl","version","findPlace","place","loc","data","geometry","location","jQuery","ajax","url","this","query","name","ll","lat","lng","client_id","client_secret","v","limit","dataType","done","venue","response","venues","getTips","fail","msg","statusText","viewmodel","addError","id","tips","fourSquare","setInfoWindow"],"mappings":"AACAA,IAAAC,WAAAD,IAAAC,eAEA,WAEA,GAAAC,GAAA,mDACAC,EAAA,kDAEAH,KAAAC,YACAG,QAAA,wCACAC,QAAA,WAEAC,UAAA,SAAAC,GACA,GAAAC,GAAAD,EAAAE,KAAAC,SAAAC,QAEAC,QAAAC,MACAC,IAAAC,KAAAX,QAAA,SACAK,MACAO,MAAAT,EAAAU,OACAC,GAAAV,EAAAW,MAAA,IAAAX,EAAAY,MAEAC,UAAAnB,EACAoB,cAAAnB,EACAoB,EAAAR,KAAAV,QACAmB,MAAA,KAEAC,SAAA,SAEAC,KAAA,SAAAjB,GAEA,GAAAkB,GAAAlB,EAAAmB,SAAAC,OAAA,EAGA7B,KAAAC,WAAA6B,QAAAH,EAAApB,KACAwB,KAAA,SAAAtB,GACA,GAAAuB,GAAA,qBAAAvB,EAAAwB,UACAjC,KAAAkC,UAAAC,SAAAH,MAIAF,QAAA,SAAAH,EAAApB,GACAK,OAAAC,MACAC,IAAAC,KAAAX,QAAAuB,EAAAS,GAAA,QACA3B,MAEAY,UAAAnB,EACAoB,cAAAnB,EACAoB,EAAAR,KAAAV,SAEAoB,SAAA,SACAC,KAAA,SAAAjB,GACA,GAAA4B,GAAA5B,EAAAmB,SAAAS,IAEArC,KAAAkC,UAAAI,WAAAX,EAAAU,EAAA9B,GACAP,IAAAkC,UAAAK,cAAAhC,KACAwB,KAAA,SAAAtB,GACA,GAAAuB,GAAA,0BAAAvB,EAAAwB,UACAjC,KAAAkC,UAAAC,SAAAH","file":"main.min.js","sourcesContent":["/* global app jQuery */\napp.foursquare = app.foursquare || {};\n\n(function() {\n  // TODO: Move this to a config file (keep out of git)\n  var CLIENTID = 'ZBGAM3NOJCK4P345ELK2JIB232FMDENJ05GXYQRSAHOHURJR';\n  var CLIENTSECRET = 'RGEF2DNONIR0AN2GHSIIMGZWLT0IH5JSJCJ5AGFAJ2WZDGLH';\n\n  app.foursquare = {\n    baseUrl: 'https://api.foursquare.com/v2/venues/',\n    version: '20140806',\n\n    findPlace: function(place) {\n      var loc = place.data.geometry.location;\n      // Call the foursquare API\n      jQuery.ajax({\n        url: this.baseUrl + 'search',\n        data: {\n          query: place.name(),\n          ll: loc.lat() + ',' + loc.lng(),\n          // Disabled lines due to API requirements\n          client_id: CLIENTID, // eslint-disable-line camelcase\n          client_secret: CLIENTSECRET, // eslint-disable-line camelcase\n          v: this.version,\n          limit: '1'\n        },\n        dataType: 'json'\n\n      }).done(function(data) {\n        // Best matching venue\n        var venue = data.response.venues[0];\n\n        // Call the API again for venue tips\n        app.foursquare.getTips(venue, place);\n      }).fail(function(data) {\n        var msg = 'Foursquare Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    },\n\n    getTips: function(venue, place) {\n      jQuery.ajax({\n        url: this.baseUrl + venue.id + '/tips',\n        data: {\n          // Disabled lines due to API requirements\n          client_id: CLIENTID, // eslint-disable-line camelcase\n          client_secret: CLIENTSECRET, // eslint-disable-line camelcase\n          v: this.version\n        },\n        dataType: 'json'\n      }).done(function(data) {\n        var tips = data.response.tips;\n        // Assign details to place\n        app.viewmodel.fourSquare(venue, tips, place);\n        app.viewmodel.setInfoWindow(place);\n      }).fail(function(data) {\n        var msg = 'Foursquare Tips Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    }\n  };\n})();\n"],"sourceRoot":"/source/"}