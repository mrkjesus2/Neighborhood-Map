{"version":3,"sources":["foursquare.js"],"names":["app","foursquare","CLIENTID","CLIENTSECRET","baseUrl","version","findPlace","place","console","log","frSqrInfo","loc","data","geometry","location","jQuery","ajax","url","this","query","name","ll","lat","lng","client_id","client_secret","v","limit","dataType","done","venue","response","venues","getTips","fail","msg","statusText","viewmodel","addError","id","tips","fourSquare"],"mappings":"AACAA,IAAAC,WAAAD,IAAAC,eAEA,WAEA,GAAAC,GAAA,mDACAC,EAAA,kDAEAH,KAAAC,YACAG,QAAA,uCACAC,QAAA,WAEAC,UAAA,SAAAC,GAEA,GADAC,QAAAC,IAAA,aACAF,EAAAG,YACAF,QAAAC,IAAAF,EAAAG,iBACA,CACAF,QAAAC,IAAA,qBACA,IAAAE,GAAAJ,EAAAK,KAAAC,SAAAC,QAEAC,QAAAC,MACAC,IAAAC,KAAAd,QAAA,SACAQ,MACAO,MAAAZ,EAAAa,OACAC,GAAAV,EAAAW,MAAA,IAAAX,EAAAY,MAEAC,UAAAtB,EACAuB,cAAAtB,EACAuB,EAAAR,KAAAb,QACAsB,MAAA,KAEAC,SAAA,SAEAC,KAAA,SAAAjB,GAEA,GAAAkB,GAAAlB,EAAAmB,SAAAC,OAAA,EAGAhC,KAAAC,WAAAgC,QAAAH,EAAAvB,KACA2B,KAAA,SAAAtB,GACA,GAAAuB,GAAA,qBAAAvB,EAAAwB,UACApC,KAAAqC,UAAAC,SAAAH,GACA3B,QAAAC,IAAA0B,OAKAF,QAAA,SAAAH,EAAAvB,GACAC,QAAAC,IAAA,WACAM,OAAAC,MACAC,IAAAC,KAAAd,QAAA0B,EAAAS,GAAA,QACA3B,MAEAY,UAAAtB,EACAuB,cAAAtB,EACAuB,EAAAR,KAAAb,SAEAuB,SAAA,SACAC,KAAA,SAAAjB,GACA,GAAA4B,GAAA5B,EAAAmB,SAAAS,IAEAxC,KAAAqC,UAAAI,WAAAX,EAAAU,EAAAjC,KAEA2B,KAAA,SAAAtB,GACA,GAAAuB,GAAA,0BAAAvB,EAAAwB,UACApC,KAAAqC,UAAAC,SAAAH","file":"main.min.js","sourcesContent":["/* global app jQuery */\napp.foursquare = app.foursquare || {};\n\n(function() {\n  // TODO: Move this to a config file (keep out of git)\n  var CLIENTID = 'ZBGAM3NOJCK4P345ELK2JIB232FMDENJ05GXYQRSAHOHURJR';\n  var CLIENTSECRET = 'RGEF2DNONIR0AN2GHSIIMGZWLT0IH5JSJCJ5AGFAJ2WZDGLH';\n\n  app.foursquare = {\n    baseUrl: 'https://api.foursquare.com/v2/venus/',\n    version: '20140806',\n\n    findPlace: function(place) {\n      console.log('findPlace'); // REMOVE\n      if (place.frSqrInfo()) {\n        console.log(place.frSqrInfo());\n      } else {\n        console.log('no fourSquare data');\n        var loc = place.data.geometry.location;\n        // Call the foursquare API\n        jQuery.ajax({\n          url: this.baseUrl + 'search',\n          data: {\n            query: place.name(),\n            ll: loc.lat() + ',' + loc.lng(),\n            // Disabled lines due to API requirements\n            client_id: CLIENTID, // eslint-disable-line camelcase\n            client_secret: CLIENTSECRET, // eslint-disable-line camelcase\n            v: this.version,\n            limit: '1'\n          },\n          dataType: 'json'\n\n        }).done(function(data) {\n          // Best matching venue\n          var venue = data.response.venues[0];\n\n          // Call the API again for venue tips\n          app.foursquare.getTips(venue, place);\n        }).fail(function(data) {\n          var msg = 'Foursquare Error: ' + data.statusText;\n          app.viewmodel.addError(msg);\n          console.log(msg);\n        });\n      }\n    },\n\n    getTips: function(venue, place) {\n      console.log('getTips'); // REMOVE\n      jQuery.ajax({\n        url: this.baseUrl + venue.id + '/tips',\n        data: {\n          // Disabled lines due to API requirements\n          client_id: CLIENTID, // eslint-disable-line camelcase\n          client_secret: CLIENTSECRET, // eslint-disable-line camelcase\n          v: this.version\n        },\n        dataType: 'json'\n      }).done(function(data) {\n        var tips = data.response.tips;\n        // Assign details to place\n        app.viewmodel.fourSquare(venue, tips, place);\n        // app.viewmodel.setInfoWindow(place);\n      }).fail(function(data) {\n        var msg = 'Foursquare Tips Error: ' + data.statusText;\n        app.viewmodel.addError(msg);\n      });\n    }\n  };\n})();\n"],"sourceRoot":"/source/"}